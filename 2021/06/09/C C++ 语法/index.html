



<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="やがて、平凡な人になる" href="http://sugarsbn.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="やがて、平凡な人になる" href="http://sugarsbn.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="やがて、平凡な人になる" href="http://sugarsbn.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  

<link rel="canonical" href="http://sugarsbn.github.io/2021/06/09/C%20C++%20%E8%AF%AD%E6%B3%95/">



  <title>
C-C++ 语法 - - 计算机基础 |
SuBonan = やがて、平凡な人になる</title>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">C-C++ 语法
  </h1>
  
<div class="meta">
  <span class="item" title="作成日：2021-06-09 17:24:27">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">投稿日</span>
    <time itemprop="dateCreated datePublished" datetime="2021-06-09T17:24:27+08:00">2021-06-09</time>
  </span>
  <span class="item" title="単語数">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">単語数</span>
    <span>28k</span>
    <span class="text">単語</span>
  </span>
  <span class="item" title="読書の時間">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">読書の時間</span>
    <span>25 分</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="ナビゲーションバーの切り替え">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">SuBonan</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://ooo.0x0.ooo/2023/01/06/GAEOL.jpg"></li>
          <li class="item" data-background-image="https://ooo.0x0.ooo/2025/04/02/O0neEa.png"></li>
          <li class="item" data-background-image="https://i.imgtg.com/2023/01/12/QUBUG.jpg"></li>
          <li class="item" data-background-image="https://i.imgtg.com/2023/01/12/Q5foS.jpg"></li>
          <li class="item" data-background-image="https://ooo.0x0.ooo/2025/04/02/O0nKFN.jpg"></li>
          <li class="item" data-background-image="https://ooo.0x0.ooo/2023/01/06/GAAZ6.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">ホーム</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="item" rel="index" title="カテゴリ - 计算机基础"><span itemprop="name">- 计算机基础</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-Hans">
  <link itemprop="mainEntityOfPage" href="http://sugarsbn.github.io/2021/06/09/C%20C++%20%E8%AF%AD%E6%B3%95/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="SuBonan">
    <meta itemprop="description" content=", やがて、平凡な人になる <br><a target="_blank" rel="noopener" href="http://www.subonan.com/computer-graphics"> 图形学作业请点这里 </a>">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="やがて、平凡な人になる">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <p>编译器越来越软，规范性越来越弱</p>
<span id="more"></span>
<div class="note default">
<p>其实 C 和 C++ 有很多相通之处</p>
</div>
<h1 id="c部分"><a class="markdownIt-Anchor" href="#c部分">#</a> C 部分</h1>
<h2 id="动态空间"><a class="markdownIt-Anchor" href="#动态空间">#</a> 动态空间</h2>
<h3 id="malloc分配空间"><a class="markdownIt-Anchor" href="#malloc分配空间">#</a> malloc 分配空间</h3>
<figure class="highlight c"><figcaption><span>malloc分配空间</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> *p = <span class="built_in">malloc</span>(<span class="number">10</span> * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)  <span class="built_in">printf</span>(<span class="string">&quot;Malloc Error!\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++) *(p + i) = i; </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, p[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>0123456789</p>
</blockquote>
<h2 id="高维数组"><a class="markdownIt-Anchor" href="#高维数组">#</a> 高维数组</h2>
<h3 id="高维数组奇妙写法"><a class="markdownIt-Anchor" href="#高维数组奇妙写法">#</a> 高维数组奇妙写法</h3>
<figure class="highlight c"><figcaption><span>高维数组奇妙写法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, (a + <span class="number">1</span>)[<span class="number">2</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *(a + <span class="number">1</span> + <span class="number">2</span>));</span><br><span class="line">    <span class="comment">//     f[x] &lt;=&gt; *(f + x)</span></span><br><span class="line">    <span class="type">int</span> (*p)[<span class="number">3</span>][<span class="number">3</span>] = &amp;a;</span><br><span class="line">    <span class="type">int</span> (*p1)[<span class="number">3</span>] = a + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> *p2 = a[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, (*(a + <span class="number">1</span>))[<span class="number">2</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *(*(a + <span class="number">1</span>) + <span class="number">2</span>));</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>6422020</p>
<p>6422020</p>
<p>0</p>
<p>0</p>
</blockquote>
<h3 id="高维数组初始化"><a class="markdownIt-Anchor" href="#高维数组初始化">#</a> 高维数组初始化</h3>
<figure class="highlight c"><figcaption><span>高维数组初始化</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> arr[<span class="number">5</span>] = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;;</span><br><span class="line">    <span class="type">int</span> b = (arr+<span class="number">1</span>)[<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;is: %d\n&quot;</span>,b);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> arr2[<span class="number">3</span>][<span class="number">3</span>] = &#123;&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125;, &#123;<span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>&#125;, &#123;<span class="number">70</span>, <span class="number">80</span>, <span class="number">90</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> c = (arr2+<span class="number">1</span>)[<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;is: %d\n&quot;</span>,c);</span><br><span class="line">    <span class="type">int</span> d = (*(arr2+<span class="number">1</span>))[<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;is: %d\n&quot;</span>,d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>is: 40</p>
<p>is: 6422004</p>
<p>is: 60</p>
</blockquote>
<h3 id="高维数组的传值"><a class="markdownIt-Anchor" href="#高维数组的传值">#</a> 高维数组的传值</h3>
<figure class="highlight c"><figcaption><span>高维数组传值</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span> arr[])</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, &amp;arr);</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">1000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">5</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, &amp;a);</span><br><span class="line">    sort(a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>0<br>
6422016<br>
6421984<br>
1000</p>
</blockquote>
<h3 id="特别注意高维数组传值写法"><a class="markdownIt-Anchor" href="#特别注意高维数组传值写法">#</a> 特别注意高维数组传值写法</h3>
<figure class="highlight c"><figcaption><span>特殊注意</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">void1</span><span class="params">(<span class="type">int</span> a[][<span class="number">3</span>])</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">void2</span><span class="params">(<span class="type">int</span> (*a)[<span class="number">3</span>])</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">void void4(int **a)&#123;            // Wrong</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> arr[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">    void1(arr);</span><br><span class="line">    void2(arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="共用体"><a class="markdownIt-Anchor" href="#共用体">#</a> 共用体</h2>
<figure class="highlight c"><figcaption><span>共用体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">union</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="type">char</span> b;</span><br><span class="line">&#125; Node;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node1</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">&#125; Node1;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    Node a;</span><br><span class="line">    a.a = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a.a);</span><br><span class="line">    a.b = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a.a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">    Node1 b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3<br>
97<br>
4</p>
</blockquote>
<div class="note info">
<p>由于共用体成员共享一段内存地址，所以改变其中一个的值其他值也会改变</p>
</div>
<h2 id="函数指针"><a class="markdownIt-Anchor" href="#函数指针">#</a> 函数指针</h2>
<h3 id="函数指针-2"><a class="markdownIt-Anchor" href="#函数指针-2">#</a> 函数指针</h3>
<figure class="highlight c"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">compare1</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * A,  <span class="type">void</span> <span class="type">const</span> *B)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (*(<span class="type">int</span> *)A == *(<span class="type">int</span> *)B) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">compare2</span><span class="params">(<span class="type">void</span> <span class="type">const</span> * A,  <span class="type">void</span> <span class="type">const</span> *B)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (*(<span class="type">char</span> *)A == *(<span class="type">char</span> *)B) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">search</span><span class="params">(<span class="type">void</span> *a, <span class="type">void</span> *b, <span class="type">int</span> (*compare)(<span class="type">void</span> <span class="type">const</span> *A, <span class="type">void</span> <span class="type">const</span> *B))</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (compare(a, b))  <span class="built_in">printf</span>(<span class="string">&quot;yes!\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;no!\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> (*func[])(<span class="type">void</span> <span class="type">const</span> *, <span class="type">void</span> <span class="type">const</span> *) = &#123;compare1, compare2&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span>&#123;</span><br><span class="line">    <span class="type">int</span> *p1, *p2;</span><br><span class="line">    <span class="type">char</span> *c1, *c2;</span><br><span class="line">    p1 = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="number">4</span>);p2 = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="number">4</span>); </span><br><span class="line">    c1 = (<span class="type">char</span>*) <span class="built_in">malloc</span>(<span class="number">1</span>); c2 = (<span class="type">char</span>*) <span class="built_in">malloc</span>(<span class="number">1</span>);</span><br><span class="line">    *p1 = <span class="number">1</span>; *p2 = <span class="number">2</span>;</span><br><span class="line">    *c1 = <span class="string">&#x27;a&#x27;</span>; *c2 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    search(p1, p2, compare1);</span><br><span class="line">    search(c1, c2, compare2);</span><br><span class="line">    search(c1, c2, compare1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, func[<span class="number">0</span>](p1, p2));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, argc);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>no!<br>
yes!<br>
yes!<br>
0<br>
1</p>
</blockquote>
<div class="note info">
<p>根据我的理解 void 出现在函数参数里起到的泛型的作用，而 int *compare (…,…) 起到了传一个函数进去的作用</p>
</div>
<h2 id="宏"><a class="markdownIt-Anchor" href="#宏">#</a> 宏</h2>
<h3 id="宏的特殊用法"><a class="markdownIt-Anchor" href="#宏的特殊用法">#</a> 宏的特殊用法</h3>
<figure class="highlight c"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> Conn(x, y) x##y</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ToChar(x) *#x</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ToString(x) #x</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, Conn(<span class="number">123</span>, <span class="number">456</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, ToChar(<span class="number">5</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, ToString(<span class="number">123456</span>));</span><br><span class="line">    <span class="type">char</span> *p = ToString(<span class="number">12345678912381098309213</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(p));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>123456<br>
5<br>
123456<br>
8<br>
12345678912381098309213</p>
</blockquote>
<div class="note info">
<p>注意 char * 的 size 恒为 8</p>
</div>
<h2 id="柔性数组"><a class="markdownIt-Anchor" href="#柔性数组">#</a> 柔性数组</h2>
<figure class="highlight c"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">SoftStruct</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="type">int</span> <span class="built_in">array</span>[];</span><br><span class="line">&#125; SoftStruct;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    SoftStruct a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">    SoftStruct *p;</span><br><span class="line">    p = (SoftStruct*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) + <span class="keyword">sizeof</span>(<span class="type">int</span>) * (<span class="number">10</span>));</span><br><span class="line">    p -&gt; len = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; (p -&gt; len);i++)  (p -&gt; <span class="built_in">array</span>[i]) = i;   </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; (p -&gt; len);i++)  <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, p -&gt; <span class="built_in">array</span>[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>4<br>
0<br>
1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9</p>
</blockquote>
<div class="note info">
<p>注意在结构体里最后一个成员变量 int array [] 并没有占空间，使用时才动态分配空间，且得到和其他成员变量连续的内存空间</p>
</div>
<h2 id="字符串相关"><a class="markdownIt-Anchor" href="#字符串相关">#</a> 字符串相关</h2>
<h3 id="初始化"><a class="markdownIt-Anchor" href="#初始化">#</a> 初始化</h3>
<figure class="highlight c"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">char</span>* str = <span class="string">&quot;Hello&quot;</span>;                        <span class="comment">// 已经进行了内存分配，str = (char*) malloc(6 * sizeof(char))</span></span><br><span class="line">    <span class="type">char</span> str1[<span class="number">5</span>] = <span class="string">&quot;Hell&quot;</span>;                      </span><br><span class="line">    <span class="type">char</span> str2[<span class="number">5</span>] = &#123;<span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;\0&#x27;</span>&#125;;  <span class="comment">// str1 &lt;=&gt; str2 等价</span></span><br><span class="line">    <span class="type">char</span> str3[<span class="number">5</span>] = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, str3);                          <span class="comment">//注意str3最后少了个&#x27;\0&#x27;,所以会继续打印连续地址村的str2</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>, str3, str2, str1);     <span class="comment">//内存: H e l l o H e l l \0 H e l l \0</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, *(str + <span class="number">1</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;str1 : %d %s\n&quot;</span>, <span class="keyword">sizeof</span>(str1), str1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;str2 : %d %s\n&quot;</span>, <span class="keyword">sizeof</span>(str2), str2);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, str1 == str2);</span><br><span class="line">    str2[<span class="number">2</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;str2: %d %s\n&quot;</span>, <span class="built_in">strlen</span>(str2), str2);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>, *(str2 + <span class="number">3</span>));</span><br><span class="line">    <span class="type">int</span>* intP = (<span class="type">int</span>*) <span class="built_in">malloc</span>(<span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    intP[<span class="number">4</span>] = <span class="number">5</span>;   *(intP + <span class="number">4</span>) = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>HelloHell<br>
6422017 6422022 6422027<br>
e<br>
str1 : 5 Hell<br>
str2 : 5 Hell<br>
0<br>
str2: 2 He<br>
l</p>
</blockquote>
<h3 id="strcpy函数"><a class="markdownIt-Anchor" href="#strcpy函数">#</a> strcpy 函数</h3>
<figure class="highlight c"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span>* argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> buf[<span class="number">2</span>];</span><br><span class="line">    <span class="type">char</span> *str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    <span class="type">char</span> (*q)[<span class="number">2</span>] = &amp;buf;</span><br><span class="line">    <span class="built_in">strcpy</span>(buf,str);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;buf:%s\nsizeof(buf) = %ld\nstrlen(buf) = %ld\n&quot;</span>,</span><br><span class="line">           buf,<span class="keyword">sizeof</span>(buf),<span class="built_in">strlen</span>(buf));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>, str, &amp;str, buf);</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> buf1[<span class="number">20</span>];</span><br><span class="line">    <span class="built_in">strncpy</span>(buf1,str,<span class="number">20</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;buf1:%s\nsizeof(buf1) = %ld\nstrlen(buf1) = %ld\n&quot;</span>,</span><br><span class="line">           buf1,<span class="keyword">sizeof</span>(buf1),<span class="built_in">strlen</span>(buf1));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>, str, &amp;str, buf);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>buf:hello world<br>
sizeof(buf) = 2<br>
strlen(buf) = 11<br>
4210688 6422032 6422046<br>
buf1:hello world<br>
sizeof(buf1) = 20<br>
strlen(buf1) = 11<br>
4210688 6422032 6422046</p>
</blockquote>
<div class="note info">
<p>注意 sizeof 是在编译时运算的分配的空间，而 strlen 是运行时遍历到第一个 \0，strcpy 原字符串长度过长时会引起覆盖掉 \0 导致不受控制的内存覆盖</p>
</div>
<h3 id="strcmp函数"><a class="markdownIt-Anchor" href="#strcmp函数">#</a> strcmp 函数</h3>
<figure class="highlight c++"><figcaption><span>strcmp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">char</span> a[] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">    <span class="type">char</span> b[] = <span class="string">&quot;ab&quot;</span>;</span><br><span class="line">    <span class="type">char</span> c[] = <span class="string">&quot;ad&quot;</span>;</span><br><span class="line">    <span class="type">char</span> d[] = <span class="string">&quot;d&quot;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;strcmp(\&quot;abc\&quot;, \&quot;ab\&quot;)=%d\n&quot;</span>, <span class="built_in">strcmp</span>(a, b));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;strcmp(\&quot;ab\&quot;, \&quot;abc\&quot;)=%d\n&quot;</span>, <span class="built_in">strcmp</span>(b, a));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;strcmp(\&quot;ab\&quot;, \&quot;ab\&quot;)=%d\n&quot;</span>, <span class="built_in">strcmp</span>(b, b));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;strcmp(\&quot;ad\&quot;, \&quot;abc\&quot;)=%d\n&quot;</span>, <span class="built_in">strcmp</span>(c, a));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>strcmp(“abc”, “ab”)=1<br>
strcmp(“ab”, “abc”)=-1<br>
strcmp(“ab”, “ab”)=0<br>
strcmp(“ad”, “abc”)=1</p>
</blockquote>
<div class="note info">
<p>就是字典序，大于输出 1，小于输出 - 1，等于输出 0.（为啥要记这东西</p>
</div>
<h3 id="存储区域"><a class="markdownIt-Anchor" href="#存储区域">#</a> 存储区域</h3>
<figure class="highlight c++"><figcaption><span>char* 与 char[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">char</span> a[<span class="number">6</span>] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">	<span class="type">char</span> *p = <span class="string">&quot;123&quot;</span>;</span><br><span class="line">    <span class="built_in">strcat</span>(a, p);	<span class="comment">//没问题,a=&quot;hello123&quot;</span></span><br><span class="line">    <span class="built_in">strcat</span>(p, a);   <span class="comment">//错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
<p>注意到，“123” 储存在常量区，而 char *p 在编译时就确定指向了它，不可被更改。而 char a [6] 字符数组在运行时才被初始化为”hello“，相当于在堆上 malloc 了一个空间。</p>
</div>
<h2 id="指针初步"><a class="markdownIt-Anchor" href="#指针初步">#</a> 指针初步</h2>
<figure class="highlight c"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>* a, <span class="type">int</span>* b)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span>* temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">swap1</span><span class="params">(<span class="type">int</span> *a, <span class="type">int</span> *b)</span>&#123;</span><br><span class="line">	<span class="type">int</span> t = *a;</span><br><span class="line">	*a = *b;</span><br><span class="line">	*b = t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line">    swap(&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a is %d, b is %d\n&quot;</span>, a,b);</span><br><span class="line">    swap1(&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a is %d, b is %d\n&quot;</span>, a,b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>a is 10, b is 20<br>
a is 20, b is 10</p>
</blockquote>
<figure class="highlight c"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%x\n&quot;</span>, &amp;a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span>* p;</span><br><span class="line">    p = &amp;a;</span><br><span class="line">    <span class="type">int</span> *p1;</span><br><span class="line">    *p1 = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%x %x\n&quot;</span>, p1, *p1);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;p is %x\n&quot;</span>, p);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*p is %d\n&quot;</span>, *p);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>* p2 = (<span class="type">int</span>*)<span class="number">0x61fe04</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*p2 is %d\n&quot;</span>, *p2);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%x &quot;</span>, &amp;a);</span><br><span class="line">    func(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>c013c0 a<br>
p is 61fe04<br>
*p is 10<br>
*p2 is 10<br>
61fe04 61fde0</p>
</blockquote>
<h1 id="c部分-2"><a class="markdownIt-Anchor" href="#c部分-2">#</a> C++ 部分</h1>
<h2 id="运算优先级"><a class="markdownIt-Anchor" href="#运算优先级">#</a> 运算优先级</h2>
<figure class="highlight c++"><figcaption><span>demo1.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="type">int</span> u;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  a[i].u = i + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    A* p = a;</span><br><span class="line">    cout &lt;&lt; (++p)-&gt;u &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; p - a &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++) cout &lt;&lt; a[i].u &lt;&lt; <span class="string">&quot; &quot;</span>;cout&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ++p-&gt;u &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; p - a &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++) cout &lt;&lt; a[i].u &lt;&lt; <span class="string">&quot; &quot;</span>;cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>2<br>
1<br>
1 2 3 4 5 6 7 8 9 10<br>
3<br>
1<br>
1 3 3 4 5 6 7 8 9 10</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo2.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  a[i] = <span class="number">10</span> - i;</span><br><span class="line">    <span class="type">int</span> *p = a;</span><br><span class="line">    cout &lt;&lt; *p++ &lt;&lt; endl;       <span class="comment">//&lt;=&gt; *(p++);</span></span><br><span class="line">    cout &lt;&lt; p - a &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>;cout&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  a[i] = <span class="number">10</span> - i;</span><br><span class="line">    p = a;</span><br><span class="line">    cout &lt;&lt; (*p)++ &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; p - a &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>;cout&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">    p = a;</span><br><span class="line">    cout &lt;&lt; *p + <span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>10<br>
1<br>
10 9 8 7 6 5 4 3 2 1<br>
10<br>
0<br>
11 9 8 7 6 5 4 3 2 1<br>
13</p>
</blockquote>
<h2 id="伪局部函数"><a class="markdownIt-Anchor" href="#伪局部函数">#</a> （伪）局部函数</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;                 <span class="comment">//重载()实现伪函数</span></span><br><span class="line">    <span class="keyword">struct</span>&#123;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">()</span></span>&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;HELLO&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; foo;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">foo</span>();</span><br><span class="line">    cout &lt;&lt; <span class="built_in">foo</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>HELLO<br>
3</p>
</blockquote>
<h2 id="纯虚函数和抽象类"><a class="markdownIt-Anchor" href="#纯虚函数和抽象类">#</a> 纯虚函数和抽象类</h2>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>= <span class="number">0</span>;        <span class="comment">//只有virtual才能声明=0</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A&#123;                     <span class="comment">// A限制了B必须重写实现func()才可以被实例化</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    B b;</span><br><span class="line">    b.<span class="built_in">func</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Hello</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Hello!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span>=<span class="keyword">delete</span>; <span class="comment">//这样禁止了所有的B的实例调用func()函数</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">C</span>()=<span class="keyword">delete</span>;         <span class="comment">//特别地，把构造函数delete掉，则C永远无法实例化</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    B b;</span><br><span class="line">    <span class="comment">//b.func()			错误</span></span><br><span class="line">    <span class="comment">//C c;				错误，无法实例化</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="仿函数"><a class="markdownIt-Anchor" href="#仿函数">#</a> 仿函数</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Class_Func</span>&#123;   <span class="comment">//虽然他是个类，但却起到函数的作用。</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">operator</span> <span class="params">()</span><span class="params">(<span class="type">int</span> num)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> num == <span class="number">10</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">func</span><span class="params">(<span class="type">int</span> num)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num == <span class="number">10</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cal</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> len, Class_Func f)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">For</span>(i, <span class="number">0</span>, len)   <span class="keyword">if</span> (<span class="built_in">f</span>(a[i]))    res++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cal</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> len, <span class="type">bool</span> (*func)(<span class="type">int</span> num))</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">For</span>(i, <span class="number">0</span>, len)   <span class="keyword">if</span> (<span class="built_in">func</span>(a[i]))    res++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">5</span>] = &#123;<span class="number">10</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">1</span>,<span class="number">10</span>&#125;;</span><br><span class="line">    Class_Func t;</span><br><span class="line">    <span class="built_in">cal</span>(a, <span class="number">5</span>, t);       <span class="comment">//传了个类的对象进去，但是用处是作为一个函数</span></span><br><span class="line">    <span class="built_in">cal</span>(a, <span class="number">5</span>, <span class="built_in">Class_Func</span>());   <span class="comment">//这么写也可以</span></span><br><span class="line">    <span class="built_in">cal</span>(a, <span class="number">5</span>, func);    <span class="comment">//当然写函数指针也可以</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3<br>
3<br>
3</p>
</blockquote>
<h2 id="分配内存"><a class="markdownIt-Anchor" href="#分配内存">#</a> 分配内存</h2>
<h3 id="bad版"><a class="markdownIt-Anchor" href="#bad版">#</a> bad 版</h3>
<figure class="highlight c++"><figcaption><span>stringbad.h</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StringBad</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">char</span> * str;                <span class="comment">// pointer to string</span></span><br><span class="line">    <span class="type">int</span> len;                   <span class="comment">// length of string</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> num_strings;    <span class="comment">// number of objects</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">StringBad</span>(<span class="type">const</span> <span class="type">char</span> * s); <span class="comment">// constructor</span></span><br><span class="line">    <span class="built_in">StringBad</span>();               <span class="comment">// default constructor</span></span><br><span class="line">    ~<span class="built_in">StringBad</span>();              <span class="comment">// destructor</span></span><br><span class="line"><span class="comment">// friend function</span></span><br><span class="line">    <span class="keyword">friend</span> std::ostream &amp; <span class="keyword">operator</span>&lt;&lt;(std::ostream &amp; os, </span><br><span class="line">                       <span class="type">const</span> StringBad &amp; st);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>stringbad.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"></span><br><span class="line"><span class="comment">// initializing static class member</span></span><br><span class="line"><span class="type">int</span> StringBad::num_strings = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// class methods</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// construct StringBad from C string</span></span><br><span class="line">StringBad::<span class="built_in">StringBad</span>(<span class="type">const</span> <span class="type">char</span> * s)</span><br><span class="line">&#123;</span><br><span class="line">    len = std::<span class="built_in">strlen</span>(s);             <span class="comment">// set size</span></span><br><span class="line">    str = <span class="keyword">new</span> <span class="type">char</span>[len + <span class="number">1</span>];          <span class="comment">// allot storage</span></span><br><span class="line">    std::<span class="built_in">strcpy</span>(str, s);              <span class="comment">// initialize pointer</span></span><br><span class="line">    num_strings++;                    <span class="comment">// set object count</span></span><br><span class="line">    cout &lt;&lt; num_strings &lt;&lt; <span class="string">&quot;: \&quot;&quot;</span> &lt;&lt; str</span><br><span class="line">         &lt;&lt; <span class="string">&quot;\&quot; object created\n&quot;</span>;    <span class="comment">// For Your Information</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">StringBad::<span class="built_in">StringBad</span>()                <span class="comment">// default constructor</span></span><br><span class="line">&#123;</span><br><span class="line">    len = <span class="number">4</span>;</span><br><span class="line">    str = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">4</span>];</span><br><span class="line">    std::<span class="built_in">strcpy</span>(str, <span class="string">&quot;C++&quot;</span>);          <span class="comment">// default string</span></span><br><span class="line">    num_strings++;</span><br><span class="line">    cout &lt;&lt; num_strings &lt;&lt; <span class="string">&quot;: \&quot;&quot;</span> &lt;&lt; str</span><br><span class="line">         &lt;&lt; <span class="string">&quot;\&quot; default object created\n&quot;</span>;  <span class="comment">// FYI</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">StringBad::~<span class="built_in">StringBad</span>()               <span class="comment">// necessary destructor</span></span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\&quot;&quot;</span> &lt;&lt; str &lt;&lt; <span class="string">&quot;\&quot; object deleted, &quot;</span>;    <span class="comment">// FYI</span></span><br><span class="line">    --num_strings;                    <span class="comment">// required</span></span><br><span class="line">    cout &lt;&lt; num_strings &lt;&lt; <span class="string">&quot; left\n&quot;</span>; <span class="comment">// FYI</span></span><br><span class="line">    <span class="keyword">delete</span> [] str;                    <span class="comment">// required</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream &amp; <span class="keyword">operator</span>&lt;&lt;(std::ostream &amp; os, <span class="type">const</span> StringBad &amp; st)</span><br><span class="line">&#123;</span><br><span class="line">    os &lt;&lt; st.str;</span><br><span class="line">    <span class="keyword">return</span> os; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>vegnew.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vegnews.cpp -- using new and delete with classes</span></span><br><span class="line"><span class="comment">// compile with strngbad.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;strngbad.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">callme1</span><span class="params">(StringBad &amp;)</span></span>;  <span class="comment">// pass by reference</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">callme2</span><span class="params">(StringBad)</span></span>;    <span class="comment">// pass by value</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> std::endl;</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Starting an inner block.\n&quot;</span>;</span><br><span class="line">        <span class="function">StringBad <span class="title">headline1</span><span class="params">(<span class="string">&quot;Celery Stalks at Midnight&quot;</span>)</span></span>;</span><br><span class="line">        <span class="function">StringBad <span class="title">headline2</span><span class="params">(<span class="string">&quot;Lettuce Prey&quot;</span>)</span></span>;</span><br><span class="line">        <span class="function">StringBad <span class="title">sports</span><span class="params">(<span class="string">&quot;Spinach Leaves Bowl for Dollars&quot;</span>)</span></span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;headline1: &quot;</span> &lt;&lt; headline1 &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;headline2: &quot;</span> &lt;&lt; headline2 &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;sports: &quot;</span> &lt;&lt; sports &lt;&lt; endl;   <span class="comment">//到这里创建了三个StringBad对象</span></span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">callme1</span>(headline1);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;headline1: &quot;</span> &lt;&lt; headline1 &lt;&lt; endl; <span class="comment">//这里输出headline1传引用未发生意外</span></span><br><span class="line">        <span class="built_in">callme2</span>(headline2);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;headline2: &quot;</span> &lt;&lt; headline2 &lt;&lt; endl; <span class="comment">//这里将headline传值进入函数，而值出栈时会调用其析构函数</span></span><br><span class="line">                                                    <span class="comment">//但我在疑惑，明明传入时复制拷贝了一个对象，</span></span><br><span class="line">                                                    <span class="comment">//应该调用的是复制的对象的析构函数啊，为什么导致headline2空了呐</span></span><br><span class="line">                                                    <span class="comment">//发现赋值时，调用的是默认的*复制构造函数*，即BadString(const BadString &amp;s)</span></span><br><span class="line">                                                    <span class="comment">//而其实现中有一句str = s.str;导致复制的对象和headline2的str指向同一块地址！</span></span><br><span class="line">                                                    <span class="comment">//所以复制的对象析构时直接把headline2的str也给delete了</span></span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Initialize one object to another:\n&quot;</span>;</span><br><span class="line">        StringBad sailor = sports;                  <span class="comment">//这里调用的也是默认的*复制构造函数*，即sailor=BadString(sports)</span></span><br><span class="line">                                                    <span class="comment">//这里计数器每增加是因为用*复制构造函数*创建的对象都不应该计数</span></span><br><span class="line">                                                    <span class="comment">//因为复制的对象str和原对象指向同一块地址！</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;sailor: &quot;</span> &lt;&lt; sailor &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Assign one object to another:\n&quot;</span>;</span><br><span class="line">        StringBad knot;</span><br><span class="line">        knot = headline1;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;knot: &quot;</span> &lt;&lt; knot &lt;&lt; endl;           <span class="comment">//这里会先调用默认无参构造函数，再赋值过去</span></span><br><span class="line">        cout &lt;&lt; endl;               <span class="comment">//接下来是析构部分</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Exiting the block.\n&quot;</span>;     <span class="comment">//这里会re，因为在headline2析构时，headline2的str早就被delete掉了</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;End of main()\n&quot;</span>;</span><br><span class="line">    <span class="comment">// std::cin.get();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">callme1</span><span class="params">(StringBad &amp; rsb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;String passed by reference:\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;    \&quot;&quot;</span> &lt;&lt; rsb &lt;&lt; <span class="string">&quot;\&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">callme2</span><span class="params">(StringBad sb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;String passed by value:\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;    \&quot;&quot;</span> &lt;&lt; sb &lt;&lt; <span class="string">&quot;\&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Starting an inner block.<br>
1: “Celery Stalks at Midnight” object created<br>
2: “Lettuce Prey” object created<br>
3: “Spinach Leaves Bowl for Dollars” object created<br>
headline1: Celery Stalks at Midnight<br>
headline2: Lettuce Prey<br>
sports: Spinach Leaves Bowl for Dollars</p>
<p>String passed by reference:<br>
“Celery Stalks at Midnight”<br>
headline1: Celery Stalks at Midnight<br>
String passed by value:<br>
“Lettuce Prey”<br>
“Lettuce Prey” object deleted, 2 left<br>
headline2:</p>
<p>Initialize one object to another:<br>
sailor: Spinach Leaves Bowl for Dollars<br>
Assign one object to another:<br>
3: “C++” default object created<br>
knot: Celery Stalks at Midnight</p>
<p>Exiting the block.<br>
“Celery Stalks at Midnight” object deleted, 2 left<br>
“Spinach Leaves Bowl for Dollars” object deleted, 1 left<br>
&quot; 衑？</p>
</blockquote>
<h3 id="good版"><a class="markdownIt-Anchor" href="#good版">#</a> good 版</h3>
<ul>
<li>good 版就是重写了 BadString (const BadString &amp; s)、BadString &amp; operator = (const BadString &amp; s) 之类的一切<ins>可能产生复制对象</ins>的函数，把其中的 str = s.str 改成 str = new char [strlen (s.str) + 1], strcpy (str, s.str)。一定要手动新分配内存。</li>
</ul>
<h2 id="构造函数和析构函数"><a class="markdownIt-Anchor" href="#构造函数和析构函数">#</a> 构造函数和析构函数</h2>
<h3 id="对象和指针的析构顺序"><a class="markdownIt-Anchor" href="#对象和指针的析构顺序">#</a> 对象和指针的析构顺序</h3>
<figure class="highlight c++"><figcaption><span>stock.h</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stock</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        string company;</span><br><span class="line">        <span class="type">long</span> shares;</span><br><span class="line">        <span class="type">double</span> share_val;</span><br><span class="line">        <span class="type">double</span> total_val;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">set_tot</span><span class="params">()</span></span>&#123;total_val = share_val * shares;&#125;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">Stock</span>();</span><br><span class="line">        <span class="built_in">Stock</span>(<span class="type">const</span> string &amp;co);</span><br><span class="line">        <span class="keyword">virtual</span> ~<span class="built_in">Stock</span>();</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">buy</span><span class="params">(<span class="type">long</span> num, <span class="type">double</span> price)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">sell</span><span class="params">(<span class="type">long</span> num, <span class="type">double</span> price)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">double</span> price)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>stock.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Stock::<span class="built_in">Stock</span>()&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Stock default constructor is called!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    company = <span class="string">&quot;no name&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">Stock::<span class="built_in">Stock</span>(<span class="type">const</span> string &amp;co):<span class="built_in">company</span>(co)&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Stock constructor with parameter is called!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">Stock::~<span class="built_in">Stock</span>()&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Bye!&quot;</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; company &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Stock::show</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; company &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Stock B = (string)<span class="string">&quot;B&quot;</span>;      <span class="comment">//等价于 Stock B = Stock((string)&quot;B&quot;);</span></span><br><span class="line">    Stock* A = <span class="keyword">new</span> <span class="built_in">Stock</span>();</span><br><span class="line">    <span class="keyword">delete</span> A;</span><br><span class="line">   <span class="comment">// return 0;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Stock constructor with parameter is called!<br>
Stock default constructor is called!<br>
Bye! no name<br>
Bye! B</p>
</blockquote>
<div class="note info">
<p>可以注意到默认的析构函数总是在出栈时调用（即总在手写实现 delete 后面</p>
</div>
<h3 id="继承的构造与析构"><a class="markdownIt-Anchor" href="#继承的构造与析构">#</a> 继承的构造与析构</h3>
<figure class="highlight c++"><figcaption><span>demo.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BaseDemo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">BaseDemo</span>() <span class="comment">// Constructor</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;This is the BaseDemo constructor. \n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ~<span class="built_in">BaseDemo</span>() <span class="comment">// Destructor</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;This is the BaseDemo destructor.\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;show from Base Demo!&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Derived class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DeriDemo</span> : <span class="keyword">public</span> BaseDemo</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">DeriDemo</span>() <span class="comment">// Constructor</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;This is the DeriDemo constructor.\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ~<span class="built_in">DeriDemo</span>() <span class="comment">// Destructor</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;This is the DeriDemo destructor.\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;show from DeriDemo&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DeriDemo *A = <span class="keyword">new</span> <span class="built_in">DeriDemo</span>();</span><br><span class="line">    <span class="keyword">delete</span> A;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    BaseDemo *B = <span class="keyword">new</span> <span class="built_in">DeriDemo</span>();</span><br><span class="line">    B -&gt; <span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This is the BaseDemo constructor.<br>
This is the DeriDemo constructor.<br>
This is the DeriDemo destructor.<br>
This is the BaseDemo destructor.</p>
<p>This is the BaseDemo constructor.<br>
This is the DeriDemo constructor.<br>
show from DeriDemo</p>
</blockquote>
<div class="note info">
<p>可以注意到构造函数从基类开始，析构函数从派生类开始。此外，指针 new 的或者 malloc 分配的对象地址不手动删除时不会被自动 delete 掉。这里还可以注意下 B 虽然是基类指针却指向一个派生类，而虚函数 show 很好的体现了指针对象的类别。</p>
</div>
<div class="note success">
<p>而特别地，C++ 中将类的析构函数写成虚函数是很好的习惯。防止在多态时用基类指针指向派生类时，析构却没有调用派生类析构函数导致内存泄漏。</p>
</div>
<div class="note info">
<p>进一步地，为什么要用基类指针指向派生类呢？这就是继承与多态的内容了。可以理解多态为 “接受来自基类的同一指令，但却根据不同的派生类产生不同的行为”。譬如基类是 “图形”，而它的派生类有 “矩形”“三角形”“圆” 等等。而图形都可以求面积，所以 getArea () 函数应该写在基类里，并且写成虚函数，根据不同的派生类进行不同的面积公式计算。而 “接受同一指令” 即需要使用基类指针。即我不关心你究竟是三角形还是矩形，我只关心其可以求面积。事实上就是把<ins>接口与实现分离</ins>.{dot}，基类的虚函数说明了对外界能使用的函数信息，不同的派生类进行自己独特的实现。</p>
</div>
<h3 id="多继承"><a class="markdownIt-Anchor" href="#多继承">#</a> 多继承</h3>
<figure class="highlight c++"><figcaption><span>djc.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    <span class="built_in">A</span>()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;A()\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">A</span>()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;~A()\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A&#123;</span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    <span class="built_in">B</span>()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;B()\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">B</span>()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;~B()\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    <span class="built_in">C</span>()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;C()\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">C</span>()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;~C()\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> : <span class="keyword">public</span> C, <span class="keyword">public</span> B&#123;</span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    <span class="built_in">D</span>()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;D()\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~<span class="built_in">D</span>()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;~D()\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">D <span class="title">d</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>C()<br>
A()<br>
B()<br>
D()<br>
~D()<br>
~B()<br>
~A()<br>
~C()</p>
</blockquote>
<ul>
<li>D 继承自 C,B，B 继承自 A。同级间写在前面的先构造，即要构造 D，先构造 C，然后构造 B，要构造 B，先构造 A，于是构造顺序为 C-A-B-D</li>
</ul>
<h2 id="局部类"><a class="markdownIt-Anchor" href="#局部类">#</a> 局部类</h2>
<figure class="highlight c++"><figcaption><span>jbl.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">c4</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;a = <span class="number">4</span>;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">c4</span> ff;</span><br><span class="line">    ff.<span class="built_in">foo</span>();</span><br><span class="line">    cout &lt;&lt; ff.a &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>这个用处属实少</li>
</ul>
<h2 id="类继承"><a class="markdownIt-Anchor" href="#类继承">#</a> 类继承</h2>
<p>这部分不想给 demo 了，主要是注意几个点：</p>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//A是一个类</span></span><br><span class="line">A a;			<span class="comment">//等价于调用默认构造函数 A a = A();			 A()</span></span><br><span class="line"><span class="function">A <span class="title">a</span><span class="params">()</span></span>;			<span class="comment">//不会创建对象，等价于定义了一个返回值是A的函数，没有函数体</span></span><br><span class="line">A a = b;		<span class="comment">//等价于调用默认复制构造函数 A a = A(b);			A(const A &amp;a)</span></span><br><span class="line">A a;</span><br><span class="line">a = b;		    <span class="comment">//等价于先调用默认构造函数A a = A();然后调用A.operator = (const A &amp;a)复制··</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(A a)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	A a;</span><br><span class="line">    <span class="built_in">func</span>(a);		<span class="comment">//实际上，传值进去时，会先调用复制构造函数A(const A &amp;a)复制一个新的对象</span></span><br><span class="line">    			    <span class="comment">//函数结束后，会调用复制的对象的析构函数</span></span><br><span class="line">    				<span class="comment">//如果不手写A(const A&amp; a),很有可能导致a中指针类型成员变量和复制出来的对象指向同一块						地址，在析构时被delete掉。详见分配内存bad版</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>demo3</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">int</span> _id, <span class="type">char</span>* _name);</span><br><span class="line">    ~<span class="built_in">Person</span>();</span><br><span class="line">    <span class="built_in">Person</span>();</span><br><span class="line">    <span class="built_in">Person</span>(<span class="type">const</span> Person&amp; pr)=<span class="keyword">delete</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Person&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Person&amp; pr)=<span class="keyword">delete</span>;	<span class="comment">//删除一定的构造方法和运算符可以限制类的使用</span></span><br><span class="line">    										<span class="comment">//譬如这个类就无法被复制，也无法被赋值，可以避免被函数传值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> id; </span><br><span class="line">    <span class="type">char</span>* name;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> counter;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="枚举类"><a class="markdownIt-Anchor" href="#枚举类">#</a> 枚举类</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Weekdays</span>&#123;</span><br><span class="line">    MON, TUE, WED, THU = <span class="number">6</span>, FRI, SAT, SUN</span><br><span class="line">&#125;;          <span class="comment">//类似于#define MON 0 #define TUE 1...但是方便写和维护</span></span><br><span class="line">		   <span class="comment">//不写默认升序。这个例子中MON=0,TUE=1,WED=2,THU=6,FRI=7,SAT=8,SUN=9</span></span><br><span class="line">		   <span class="comment">//实际上就是把抽象的编码信息变成可读的变量名。例如1你不知道他在说什么1，但是MON就知道是指星期一</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Weekdays rua = WED;</span><br><span class="line">    <span class="keyword">switch</span>(rua)&#123;</span><br><span class="line">        <span class="keyword">case</span> MON:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> TUE:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="命名空间"><a class="markdownIt-Anchor" href="#命名空间">#</a> 命名空间</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> myspace1</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">extern</span> <span class="type">int</span> gvar;<span class="comment">//内部声明</span></span><br><span class="line">	<span class="keyword">using</span> std::cout;</span><br><span class="line">	<span class="keyword">using</span> std::endl;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">myclass</span></span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">		</span>&#123;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;in space1,gvar=&quot;</span>&lt;&lt;gvar&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> myspace2</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">using</span> std::cout;</span><br><span class="line">	<span class="keyword">using</span> std::endl;</span><br><span class="line">	<span class="type">int</span> i=<span class="number">5</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">myclass</span></span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">			cout&lt;&lt;<span class="string">&quot;in space2&quot;</span>&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">namespace</span> nestedspace</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function"><span class="type">void</span> <span class="title">ExternFunc</span><span class="params">()</span></span>;<span class="comment">//内部声明</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//外部定义</span></span><br><span class="line"><span class="type">int</span> myspace1::gvar=<span class="number">1</span>;</span><br><span class="line"><span class="type">void</span> myspace2::nestedspace::<span class="built_in">ExternFunc</span>()</span><br><span class="line">&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;in nestedspace&quot;</span>&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	myspace1::myclass obj1;</span><br><span class="line">	obj<span class="number">1.</span><span class="built_in">print</span>();</span><br><span class="line">	myspace2::myclass obj2;</span><br><span class="line">	obj<span class="number">2.</span><span class="built_in">print</span>();</span><br><span class="line">	myspace2::nestedspace::<span class="built_in">ExternFunc</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>in space1,gvar=1<br>
in space2<br>
in nestedspace</p>
</blockquote>
<div class="note info">
<p>注意” 外部定义 “+” 内部声明 “和” 内部声明 “+” 外部实现 “的操作，虽然我也不知道为啥，明明内部定义 + 内部实现挺不错啊据说老版本会报错</p>
</div>
<figure class="highlight c++"><figcaption><span>匿名命名空间</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">double</span> dvar=<span class="number">1.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;dvar:&quot;</span>&lt;&lt;dvar&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">show2</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="built_in">show1</span>();</span><br><span class="line">	<span class="built_in">show2</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//a.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> dvar=<span class="number">2.8</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout&lt;&lt;<span class="string">&quot;dvar:&quot;</span>&lt;&lt;dvar&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>1.8</p>
<p>2.8</p>
</blockquote>
<div class="note info">
<p>匿名命名空间可以将 struct 和 class 的对象前都加上”static“修饰，如果定义了相同的变量名也不会报错。匿名命名空间中的变量仅在包含该匿名命名空间的源文件中可见。</p>
</div>
<h2 id="模板"><a class="markdownIt-Anchor" href="#模板">#</a> 模板</h2>
<figure class="highlight c++"><figcaption><span>模板函数</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="type">int</span> <span class="title">compare</span><span class="params">(<span class="type">const</span> T &amp;a, <span class="type">const</span> T &amp;b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a == b ? <span class="number">0</span> : (a &gt; b ? <span class="number">1</span> : <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">compare</span>(<span class="number">1</span>, <span class="number">2</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">compare</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">compare</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-1<br>
1<br>
-1</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>模板类</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="keyword">class</span> <span class="title class_">Queue</span> &#123;</span><br><span class="line">     <span class="keyword">public</span>:</span><br><span class="line">         <span class="built_in">Queue</span> ();                <span class="comment">// default constructor</span></span><br><span class="line">         <span class="function">T &amp;<span class="title">front</span> <span class="params">()</span></span>;          <span class="comment">// return element from head of Queue</span></span><br><span class="line">         <span class="function"><span class="type">const</span> T &amp;<span class="title">front</span> <span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">         <span class="function"><span class="type">void</span> <span class="title">push</span> <span class="params">(<span class="type">const</span> T &amp;)</span></span>; <span class="comment">// add element to back of Queue</span></span><br><span class="line">         <span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span></span>;              <span class="comment">// remove element from head of Queue</span></span><br><span class="line">         <span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="type">const</span></span>;      <span class="comment">// true if no elements in the Queue</span></span><br><span class="line">     <span class="keyword">private</span>:</span><br><span class="line">         <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Queue&lt;<span class="type">int</span>&gt; Q;</span><br><span class="line">    Queue&lt;<span class="type">char</span>&gt; Q1;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="嵌套类"><a class="markdownIt-Anchor" href="#嵌套类">#</a> 嵌套类</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">c1</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> a;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">c2</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="type">int</span> a;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span></span>;</span><br><span class="line">    &#125; b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">c1::foo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> c1::c2::<span class="built_in">foo</span>()&#123;</span><br><span class="line">    a = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">c1</span> f;</span><br><span class="line">    f.<span class="built_in">foo</span>();</span><br><span class="line">    f.b.<span class="built_in">foo</span>();</span><br><span class="line">    cout &lt;&lt; f.a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; f.b.a &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1<br>
2</p>
</blockquote>
<h2 id="虚函数"><a class="markdownIt-Anchor" href="#虚函数">#</a> 虚函数</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;cout&lt;&lt;<span class="string">&quot;This is A&quot;</span>&lt;&lt;endl;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;cout&lt;&lt;<span class="string">&quot;This is B&quot;</span>&lt;&lt;endl;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    B b;</span><br><span class="line">    A *p1 = &amp;a;</span><br><span class="line">    A *p2 = &amp;b;</span><br><span class="line">    p1-&gt;<span class="built_in">print</span>();</span><br><span class="line">    p2-&gt;<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This is A<br>
This is A</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;cout&lt;&lt;<span class="string">&quot;This is A&quot;</span>&lt;&lt;endl;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;cout&lt;&lt;<span class="string">&quot;This is B&quot;</span>&lt;&lt;endl;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    B b;</span><br><span class="line">    A *p1 = &amp;a;</span><br><span class="line">    A *p2 = &amp;b;</span><br><span class="line">    p1-&gt;<span class="built_in">print</span>();</span><br><span class="line">    p2-&gt;<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This is A<br>
This is B</p>
</blockquote>
<h2 id="异常"><a class="markdownIt-Anchor" href="#异常">#</a> 异常</h2>
<figure class="highlight c++"><figcaption><span>char*异常</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">divide</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">throw</span> <span class="string">&quot;rua!&quot;</span>;</span><br><span class="line">    a /= b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="built_in">divide</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;<span class="built_in">catch</span>(<span class="type">const</span> <span class="type">char</span>* e)&#123;</span><br><span class="line">        cout &lt;&lt; e &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>rua!</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>自定义异常</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">myexception</span> : <span class="keyword">public</span> std::exception &#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line">  <span class="built_in">myexception</span>(std::string s) : <span class="built_in">message</span>(s)&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">const</span> <span class="type">char</span> *<span class="title">what</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> message.<span class="built_in">data</span>();</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  std::string message;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="type">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="built_in">myexception</span>(<span class="string">&quot;p is NULL&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">catch</span>(myexception e) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, e.<span class="built_in">what</span>());</span><br><span class="line">    <span class="keyword">throw</span>;    <span class="comment">//重新抛出异常，异常类型为myexception</span></span><br><span class="line">  &#125;<span class="built_in">catch</span> (std::exception e) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, e.<span class="built_in">what</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="built_in">Func</span>();</span><br><span class="line">    &#125; <span class="built_in">catch</span>(myexception e)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, e.<span class="built_in">what</span>());</span><br><span class="line">    &#125; <span class="built_in">catch</span>(...)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>p is NULL<br>
p is NULL</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Myexception</span> : <span class="keyword">public</span> std::exception &#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line">  <span class="built_in">Myexception</span>(std::string s)&#123;</span><br><span class="line">      message = <span class="keyword">new</span> <span class="type">char</span>[s.<span class="built_in">length</span>() + <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; s.<span class="built_in">length</span>();i++)  message[i] = s[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">Myexception</span>()&#123;  message = <span class="literal">NULL</span>; &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">const</span> <span class="type">char</span> *<span class="title">what</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (message == <span class="literal">NULL</span>)  <span class="keyword">throw</span> <span class="string">&quot;unknown exception!&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span> message;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">virtual</span> ~<span class="built_in">Myexception</span>()&#123;</span><br><span class="line">      <span class="keyword">delete</span> message;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="comment">//std::string message;</span></span><br><span class="line">  <span class="type">char</span> *message;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="type">char</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">if</span> (p == <span class="literal">NULL</span>)  <span class="keyword">throw</span> <span class="built_in">Myexception</span>();  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="built_in">foo</span>();</span><br><span class="line">    &#125; <span class="built_in">catch</span>(Myexception e)&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, e.<span class="built_in">what</span>());</span><br><span class="line">      &#125;<span class="built_in">catch</span>(<span class="type">const</span> <span class="type">char</span>* s)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, s);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="built_in">catch</span>(...)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>unknown exception!</p>
</blockquote>
<div class="note info">
<p>我验证了 virtual const char *what () 里面也可以抛异常</p>
</div>
<h2 id="引用"><a class="markdownIt-Anchor" href="#引用">#</a> 引用</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> val[<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> &amp;<span class="title">put</span><span class="params">(<span class="type">int</span> idx)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> val[idx];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> &amp;b)</span></span>&#123;</span><br><span class="line">    a ^= b ^= a ^= b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> res;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fn1</span><span class="params">(<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    res = r * r;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">fn2</span><span class="params">(<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    res = r * r;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">put</span>(<span class="number">0</span>) = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">put</span>(<span class="number">1</span>) = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">For</span>(i, <span class="number">0</span>, <span class="number">2</span>)    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, val[i]);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> &amp;ra = a, &amp;rb = b;</span><br><span class="line">    <span class="built_in">swap</span>(ra, rb);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, a, b);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> r = <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> x = <span class="built_in">fn1</span>(r), y = <span class="built_in">fn2</span>(r);</span><br><span class="line">    <span class="type">int</span> &amp;ry = <span class="built_in">fn2</span>(r);<span class="comment">//  &amp;rx = fn1(r);不能这么写</span></span><br><span class="line">    cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="comment">/*rx &lt;&lt;*/</span> <span class="string">&quot; &quot;</span> &lt;&lt; ry &lt;&lt; endl; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1<br>
2<br>
2 1<br>
9 9  9</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">struct_A</span>&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10</span>];</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    int operator[] (int idx)&#123;</span></span><br><span class="line"><span class="comment">        return a[idx];                  //如果返回值是int不是int&amp;的话，a[3]=10;将非法</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    int* operator[] (int idx)&#123;</span></span><br><span class="line"><span class="comment">        return a + idx;                 //如果返回值是int*的话，赋值语句就要改成*a[3]=10;非常麻烦</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    <span class="type">int</span>&amp; <span class="keyword">operator</span>[](<span class="type">int</span> idx)&#123;</span><br><span class="line">        <span class="keyword">return</span> a[idx];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> a)</span></span>&#123;&#125;             <span class="comment">//这样写传入参数时会拷贝一份a，效率低下</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> *a)</span></span>&#123;&#125;            <span class="comment">//这样写传入参数指针有可能被修改，比较危险</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">(<span class="type">int</span>&amp; a)</span></span>&#123;&#125;            <span class="comment">//这样写没有拷贝，但传入的变量可以被修改</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func4</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; a)</span></span>&#123;&#125;      <span class="comment">//这样写既没有拷贝，也不可被修改</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    struct_A a;</span><br><span class="line">    a[<span class="number">3</span>] = <span class="number">10</span>;</span><br><span class="line">    cout &lt;&lt; a.<span class="keyword">operator</span>[](<span class="number">3</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span>&amp; rb = b;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %x %x\n&quot;</span>, rb, &amp;b, &amp;rb);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>10<br>
10 61fdec 61fdec</p>
</blockquote>
<h2 id="友元"><a class="markdownIt-Anchor" href="#友元">#</a> 友元</h2>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">B</span>;                             <span class="comment">//友元类</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">const</span> A &amp;a)</span></span>;              <span class="comment">//友元函数                  友元就是向外部的类和函数公开private</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>;						  <span class="comment">//草，我写着玩的</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="type">int</span> value = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">const</span> A &amp;a)</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d from A!\n&quot;</span>, a.value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        A a;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">()</span></span>&#123;</span><br><span class="line">            a.value = <span class="number">-100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a.value);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    B b;</span><br><span class="line">    b.<span class="built_in">print</span>();</span><br><span class="line">    b.<span class="built_in">set</span>();</span><br><span class="line">    b.<span class="built_in">print</span>();</span><br><span class="line">    </span><br><span class="line">    A a;</span><br><span class="line">    <span class="built_in">print</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>0<br>
-100<br>
0 from A!</p>
</blockquote>
<h2 id="重载运算符"><a class="markdownIt-Anchor" href="#重载运算符">#</a> 重载运算符</h2>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Time</span>&#123;</span><br><span class="line">    <span class="keyword">friend</span> Time <span class="keyword">operator</span> += (Time&amp; A, <span class="type">const</span> Time&amp; B);</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp;os, <span class="type">const</span> Time&amp; A);</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="type">int</span> minute, hour;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        Time <span class="keyword">operator</span> + (<span class="type">const</span> Time&amp; B)&#123;        <span class="comment">//直接写在类里面</span></span><br><span class="line">            Time res;</span><br><span class="line">            res.hour = <span class="keyword">this</span> -&gt; hour + B.hour + (<span class="keyword">this</span> -&gt; minute + B.minute) / <span class="number">60</span>;</span><br><span class="line">            res.minute = (<span class="keyword">this</span> -&gt; minute + B.minute) % <span class="number">60</span>;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;   </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">friend</span> ostream &amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp;os, <span class="type">const</span> Time&amp; A)&#123; <span class="comment">//重载 &lt;&lt; 写成友元在外部直接调用</span></span><br><span class="line">            os &lt;&lt; <span class="string">&quot;(&quot;</span> &lt;&lt; A.hour &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; A.minute &lt;&lt; <span class="string">&quot;)&quot;</span>;          </span><br><span class="line">            <span class="keyword">return</span> os;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Time operator &lt;&lt; (const ostream &amp;os)&#123;</span></span><br><span class="line"><span class="comment">            os &lt;&lt; &quot;(&quot; &lt;&lt; hour &lt;&lt; &quot;:&quot; &lt;&lt; minute &lt;&lt; &quot;)&quot;;</span></span><br><span class="line"><span class="comment">            return *this;</span></span><br><span class="line"><span class="comment">        &#125;               //这样写的话主程序调用就成了a &lt;&lt; cout &lt;&lt; cout &lt;&lt; cout;无法同时输出a，b</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        ostream &amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp;os)&#123;</span><br><span class="line">            os &lt;&lt; <span class="string">&quot;(&quot;</span> &lt;&lt; hour &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; minute &lt;&lt; <span class="string">&quot;)&quot;</span>;        </span><br><span class="line">            <span class="keyword">return</span> os;</span><br><span class="line">        &#125;              <span class="comment">//这样写的话就成了a &lt;&lt; cout &lt;&lt; b; 需要配合上未注释掉的friend版本</span></span><br><span class="line">                       <span class="comment">//总之，返回类型要是ostream，而且&lt;&lt;右侧元素是A最好的写法就是友元</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">(<span class="type">int</span> hour, <span class="type">int</span> minute)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span> -&gt; hour = hour;</span><br><span class="line">            <span class="keyword">this</span> -&gt; minute = minute;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d:%d\n&quot;</span>, hour, minute);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Time <span class="keyword">operator</span> += (Time&amp; A, <span class="type">const</span> Time&amp; B)&#123;      <span class="comment">//利用友元写在类外面</span></span><br><span class="line">    A = A + B;</span><br><span class="line">    <span class="keyword">return</span> A;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Time a, b;</span><br><span class="line">    a.<span class="built_in">set</span>(<span class="number">1</span>, <span class="number">30</span>);</span><br><span class="line">    b.<span class="built_in">set</span>(<span class="number">3</span>, <span class="number">40</span>);</span><br><span class="line">    a = a + b;</span><br><span class="line">    a.<span class="built_in">print</span>();</span><br><span class="line">    a += b;</span><br><span class="line">    a.<span class="built_in">print</span>();</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    a &lt;&lt; cout &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>5:10<br>
8:50<br>
(8:50)(3:40)<br>
(8:50)(3:40)</p>
</blockquote>
<div class="note info">
<p>我发现在重载运算符时，写不写 friend 的一个直接影响是 operator 函数参数的个数。如果写了 friend 就能填两个，否则只能填一个</p>
</div>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="type">int</span> a[<span class="number">10</span>];</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  a[i] = -i;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="type">int</span> &amp; <span class="keyword">operator</span> [] (<span class="type">int</span> idx)&#123;</span><br><span class="line">            <span class="keyword">return</span> a[idx];</span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">set</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        A &amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp;os)&#123;</span><br><span class="line">            os &lt;&lt; a[<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">        &#125;                           <span class="comment">//这就是demo1里面被注释掉的版本</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    a[<span class="number">2</span>] = <span class="number">114514</span>;</span><br><span class="line">    <span class="built_in">a</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, a[<span class="number">2</span>], a[<span class="number">3</span>]);</span><br><span class="line">    (a &lt;&lt; cout) &lt;&lt; cout;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-2 -3<br>
-3-3</p>
</blockquote>
<h2 id="new和delete"><a class="markdownIt-Anchor" href="#new和delete">#</a> new 和 delete</h2>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">T</span>&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">T</span>()&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;T()&quot;</span> &lt;&lt; endl;</span><br><span class="line">            w = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~<span class="built_in">T</span>()&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;~T()&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> w;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    T t = <span class="built_in">T</span>();</span><br><span class="line">    t.w = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    T* p = <span class="built_in">new</span>(&amp;t) T;      <span class="comment">//new(地址) T,在指定地址往后sizeof(T)长度的内存上新建个T</span></span><br><span class="line">    cout &lt;&lt; t.w &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> a[<span class="built_in">sizeof</span>(T)];</span><br><span class="line">    p = <span class="built_in">new</span>(a) T;        <span class="comment">//new(地址) T,在指定地址往后sizeof(T)长度的内存上新建个T</span></span><br><span class="line">                         <span class="comment">//要注意，编译阶段就会对new()里面的地址是否留足了sizeof(T)进行检查。</span></span><br><span class="line">                         <span class="comment">//若写成 char a[sizeof(T) - 1]编译阶段便会warning</span></span><br><span class="line"></span><br><span class="line">    p = <span class="built_in">new</span>(a) T;       <span class="comment">//operator new</span></span><br><span class="line">    p = <span class="keyword">new</span> <span class="built_in">T</span>();        <span class="comment">//new operator</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>T()<br>
T()<br>
0<br>
T()<br>
T()<br>
T()<br>
~T()</p>
</blockquote>
<h2 id="const-关键字"><a class="markdownIt-Anchor" href="#const-关键字">#</a> const 关键字</h2>
<figure class="highlight c++"><figcaption><span>指针</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">char</span> s[] = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> *<span class="type">const</span> p1 = s; </span><br><span class="line">    cout &lt;&lt; *p1 &lt;&lt; endl;            <span class="comment">//只能输出a，因为p1是个const，无法p1++输出后一位</span></span><br><span class="line">    <span class="type">char</span> <span class="type">const</span> *p2 = s;</span><br><span class="line">    <span class="comment">//*p2 = &quot;d&quot;;                    //无法修改p2指向的值，因为p2指向的是个char const不可修改是只读   </span></span><br><span class="line">                                    <span class="comment">//报错：error: assignment of read-only location &#x27;* p2&#x27;</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *p3 = s;             <span class="comment">//等价于p2，从右往左读指向了个const char类型无法修改      </span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>a</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">(<span class="type">int</span> *<span class="type">const</span> a)</span></span>&#123;</span><br><span class="line">    <span class="comment">//a++;              同demo1，这样写是错的</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> <span class="type">const</span> *a)</span></span>&#123;  </span><br><span class="line">    <span class="comment">//*a = 4;            无法修改，报错： error: assignment of read-only location &#x27;* a&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> *a = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">func1</span>(a);</span><br><span class="line">    <span class="built_in">func2</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>demo3</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> d = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>()&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//a = 10;</span></span><br><span class="line">        b = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">const</span> <span class="type">void</span> <span class="title">func2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//a = 10;   a是const 不可改</span></span><br><span class="line">        b = <span class="number">10</span>;      <span class="comment">//但const成员函数可以改成员变量！和网上大多说的不同</span></span><br><span class="line">                     <span class="comment">//感觉和普通成员函数没区别了</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func3</span><span class="params">()</span> <span class="type">const</span></span>&#123;             <span class="comment">//const写在这个位置只出现于成员函数，使得函数内部不得修改成员变量</span></span><br><span class="line">        <span class="comment">//b = 10;               错误，常函数不得修改成员变量</span></span><br><span class="line">        d = <span class="number">10</span>;             <span class="comment">//但全局变量可以</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">const</span> A a;</span><br><span class="line">    A b;</span><br><span class="line">    <span class="comment">//a.b = 3;  错误，a是const的全部成员变量都不可动</span></span><br><span class="line">    <span class="comment">//a.func1(); a.func2(); 错误，a是const的a无法访问其成员函数</span></span><br><span class="line">    cout &lt;&lt; a.a &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; a.b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    b.<span class="built_in">func2</span>();</span><br><span class="line">    cout &lt;&lt; b.a &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; b.b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1 2<br>
1 10</p>
</blockquote>

  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">編集日</span>
    <time title="修正日：2025-03-30 09:11:40" itemprop="dateModified" datetime="2025-03-30T09:11:40+08:00">2025-03-30</time>
  </span>
  <span id="2021/06/09/C C++ 语法/" class="item leancloud_visitors" data-flag-title="C-C++ 语法" title="閲覧数">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">閲覧数</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">回</span>
  </span>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>著者： </strong>SuBonan <i class="ic i-at"><em>@</em></i>やがて、平凡な人になる
  </li>
  <li class="link">
    <strong>記事へのリンク：</strong>
    <a href="http://sugarsbn.github.io/2021/06/09/C%20C++%20%E8%AF%AD%E6%B3%95/" title="C-C++ 语法">http://sugarsbn.github.io/2021/06/09/C C++ 语法/</a>
  </li>
  <li class="license">
    <strong>著作権表示： </strong>このブログ内のすべての記事は、特別な記載がない限り <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> の下のライセンスで保護されています。
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2021/06/03/test/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;ooo.0x0.ooo&#x2F;2023&#x2F;01&#x2F;06&#x2F;GAAZ6.jpg" title="test">
  <span class="type">前の記事</span>
  <span class="category"><i class="ic i-flag"></i> -test</span>
  <h3>test</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2021/06/16/%E5%85%B3%E4%BA%8E%E5%8F%B2%E7%93%A6%E8%A5%BF%E5%BA%A6%E8%A7%84%E5%92%8C%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%96%B9%E7%A8%8B%E7%9A%84%E6%8E%A8%E5%AF%BC/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;01&#x2F;12&#x2F;QUkeF.png" title="关于史瓦西度规和拉格朗日方程的推导">
  <span class="type">次の記事</span>
  <span class="category"><i class="ic i-flag"></i> - 数学杂记</span>
  <h3>关于史瓦西度规和拉格朗日方程的推导</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="見出し">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#c%E9%83%A8%E5%88%86"><span class="toc-number">1.</span> <span class="toc-text"> C 部分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.</span> <span class="toc-text"> 动态空间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#malloc%E5%88%86%E9%85%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.1.</span> <span class="toc-text"> malloc 分配空间</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-number">1.2.</span> <span class="toc-text"> 高维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BB%B4%E6%95%B0%E7%BB%84%E5%A5%87%E5%A6%99%E5%86%99%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 高维数组奇妙写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BB%B4%E6%95%B0%E7%BB%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 高维数组初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BB%B4%E6%95%B0%E7%BB%84%E7%9A%84%E4%BC%A0%E5%80%BC"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 高维数组的传值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E5%88%AB%E6%B3%A8%E6%84%8F%E9%AB%98%E7%BB%B4%E6%95%B0%E7%BB%84%E4%BC%A0%E5%80%BC%E5%86%99%E6%B3%95"><span class="toc-number">1.2.4.</span> <span class="toc-text"> 特别注意高维数组传值写法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B1%E7%94%A8%E4%BD%93"><span class="toc-number">1.3.</span> <span class="toc-text"> 共用体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88"><span class="toc-number">1.4.</span> <span class="toc-text"> 函数指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88-2"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 函数指针</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8F"><span class="toc-number">1.5.</span> <span class="toc-text"> 宏</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8F%E7%9A%84%E7%89%B9%E6%AE%8A%E7%94%A8%E6%B3%95"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 宏的特殊用法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%94%E6%80%A7%E6%95%B0%E7%BB%84"><span class="toc-number">1.6.</span> <span class="toc-text"> 柔性数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%85%B3"><span class="toc-number">1.7.</span> <span class="toc-text"> 字符串相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.7.1.</span> <span class="toc-text"> 初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#strcpy%E5%87%BD%E6%95%B0"><span class="toc-number">1.7.2.</span> <span class="toc-text"> strcpy 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#strcmp%E5%87%BD%E6%95%B0"><span class="toc-number">1.7.3.</span> <span class="toc-text"> strcmp 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%8C%BA%E5%9F%9F"><span class="toc-number">1.7.4.</span> <span class="toc-text"> 存储区域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E5%88%9D%E6%AD%A5"><span class="toc-number">1.8.</span> <span class="toc-text"> 指针初步</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#c%E9%83%A8%E5%88%86-2"><span class="toc-number">2.</span> <span class="toc-text"> C++ 部分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">2.1.</span> <span class="toc-text"> 运算优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%AA%E5%B1%80%E9%83%A8%E5%87%BD%E6%95%B0"><span class="toc-number">2.2.</span> <span class="toc-text"> （伪）局部函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%AF%E8%99%9A%E5%87%BD%E6%95%B0%E5%92%8C%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">2.3.</span> <span class="toc-text"> 纯虚函数和抽象类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%BF%E5%87%BD%E6%95%B0"><span class="toc-number">2.4.</span> <span class="toc-text"> 仿函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%85%8D%E5%86%85%E5%AD%98"><span class="toc-number">2.5.</span> <span class="toc-text"> 分配内存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bad%E7%89%88"><span class="toc-number">2.5.1.</span> <span class="toc-text"> bad 版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#good%E7%89%88"><span class="toc-number">2.5.2.</span> <span class="toc-text"> good 版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">2.6.</span> <span class="toc-text"> 构造函数和析构函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E6%9E%90%E6%9E%84%E9%A1%BA%E5%BA%8F"><span class="toc-number">2.6.1.</span> <span class="toc-text"> 对象和指针的析构顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E7%9A%84%E6%9E%84%E9%80%A0%E4%B8%8E%E6%9E%90%E6%9E%84"><span class="toc-number">2.6.2.</span> <span class="toc-text"> 继承的构造与析构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BB%A7%E6%89%BF"><span class="toc-number">2.6.3.</span> <span class="toc-text"> 多继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E7%B1%BB"><span class="toc-number">2.7.</span> <span class="toc-text"> 局部类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E7%BB%A7%E6%89%BF"><span class="toc-number">2.8.</span> <span class="toc-text"> 类继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB"><span class="toc-number">2.9.</span> <span class="toc-text"> 枚举类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">2.10.</span> <span class="toc-text"> 命名空间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF"><span class="toc-number">2.11.</span> <span class="toc-text"> 模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E7%B1%BB"><span class="toc-number">2.12.</span> <span class="toc-text"> 嵌套类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0"><span class="toc-number">2.13.</span> <span class="toc-text"> 虚函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8"><span class="toc-number">2.14.</span> <span class="toc-text"> 异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">2.15.</span> <span class="toc-text"> 引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8B%E5%85%83"><span class="toc-number">2.16.</span> <span class="toc-text"> 友元</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E8%BD%BD%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">2.17.</span> <span class="toc-text"> 重载运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#new%E5%92%8Cdelete"><span class="toc-number">2.18.</span> <span class="toc-text"> new 和 delete</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#const-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">2.19.</span> <span class="toc-text"> const 关键字</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="関連記事">
        <ul>
          <li><a href="/2020/10/06/%E5%85%B3%E4%BA%8Ejava%E5%9F%9F%E5%92%8C%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E4%B8%8D%E6%94%AF%E6%8C%81%E5%A4%9A%E6%80%81%E5%AF%BC%E8%87%B4%E7%9A%84%E7%BC%BA%E9%99%B7/" rel="bookmark" title="关于java域和静态方法不支持多态导致的缺陷">关于java域和静态方法不支持多态导致的缺陷</a></li><li><a href="/2020/11/23/%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F/" rel="bookmark" title="基数排序">基数排序</a></li><li class="active"><a href="/2021/06/09/C%20C++%20%E8%AF%AD%E6%B3%95/" rel="bookmark" title="C-C++语法">C-C++语法</a></li><li><a href="/2021/10/20/%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80/" rel="bookmark" title="类型和程序设计语言">类型和程序设计语言</a></li><li><a href="/2021/11/02/%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80-%E7%BB%AD/" rel="bookmark" title="类型和程序设计语言_续">类型和程序设计语言_续</a></li><li><a href="/2022/03/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="bookmark" title="操作系统">操作系统</a></li><li><a href="/2022/04/21/linker-symtable/" rel="bookmark" title="链接（基于x86-64下标准ELF格式）">链接（基于x86-64下标准ELF格式）</a></li><li><a href="/2022/08/28/%E5%85%B3%E4%BA%8EHaskell%E5%AF%B9Kmeans%E7%AE%97%E6%B3%95parallel%E5%B9%B6%E8%A1%8C%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%B3%A8%E9%87%8A/" rel="bookmark" title="关于Haskell对Kmeans算法parallel并行实现的注释">关于Haskell对Kmeans算法parallel并行实现的注释</a></li><li><a href="/2023/01/05/C-%E6%95%B0%E7%BB%84/" rel="bookmark" title="C++中数组和内存分布">C++中数组和内存分布</a></li><li><a href="/2023/01/11/Machine-Learning/" rel="bookmark" title="Machine Learning 机器学习">Machine Learning 机器学习</a></li><li><a href="/2023/01/14/%E5%9B%BE%E5%BD%A2%E5%AD%A6%E4%B8%AD%E7%9A%84%E7%9F%A9%E9%98%B5%E5%90%AB%E4%B9%89/" rel="bookmark" title="图形学中的矩阵含义">图形学中的矩阵含义</a></li><li><a href="/2023/02/01/%E7%82%B9%E7%BA%BF%E9%9D%A2%E7%9A%84%E6%8F%92%E5%80%BC/" rel="bookmark" title="点线面的插值">点线面的插值</a></li><li><a href="/2023/02/11/%E5%85%89%E7%85%A7%E6%A8%A1%E5%9E%8B/" rel="bookmark" title="光照模型">光照模型</a></li><li><a href="/2023/02/11/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F%E7%9A%84%E4%BC%98%E5%8C%96/" rel="bookmark" title="汇编语言乱七八糟的优化">汇编语言乱七八糟的优化</a></li><li><a href="/2023/02/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="bookmark" title="计算机网络">计算机网络</a></li><li><a href="/2023/06/14/Database/" rel="bookmark" title="Introduction to Database">Introduction to Database</a></li><li><a href="/2025/09/14/2025-9-14-distributed-algorithms/" rel="bookmark" title="Distributed Algorithms">Distributed Algorithms</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="概要">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="SuBonan"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">SuBonan</p>
  <div class="description" itemprop="description">やがて、平凡な人になる <br><a target="_blank" rel="noopener" href="http://www.subonan.com/computer-graphics"> 图形学作业请点这里 </a></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">128</span>
        <span class="name">ポスト</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">10</span>
        <span class="name">カテゴリ</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1N1Z2FyU0JO" title="https:&#x2F;&#x2F;github.com&#x2F;SugarSBN"><i class="ic i-github"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>ホーム</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>プロフィール</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>投稿</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>アーカイブ</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>カテゴリ</a>
  </li>

  </ul>

</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2021/06/03/test/" rel="prev" title="前の記事"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2021/06/16/%E5%85%B3%E4%BA%8E%E5%8F%B2%E7%93%A6%E8%A5%BF%E5%BA%A6%E8%A7%84%E5%92%8C%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%96%B9%E7%A8%8B%E7%9A%84%E6%8E%A8%E5%AF%BC/" rel="next" title="次の記事"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>ランダムな記事</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E6%9D%82%E8%AE%B0/" title="カテゴリ - 数学杂记">- 数学杂记</a>
</div>

    <span><a href="/2022/06/15/category-theory/" title="Category theory">Category theory</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E6%9D%82%E8%AE%B0/" title="カテゴリ - 数学杂记">- 数学杂记</a>
</div>

    <span><a href="/2022/11/01/%E8%BF%90%E7%AD%B9%E5%AD%A6/" title="运筹学">运筹学</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E6%9D%82%E8%AE%B0/" title="カテゴリ - 数学杂记">- 数学杂记</a>
</div>

    <span><a href="/2023/04/23/Time-Hierarchy-Theorem/" title="Time Hierarchy Theorem">Time Hierarchy Theorem</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E6%9D%82%E8%AE%B0/" title="カテゴリ - 数学杂记">- 数学杂记</a>
</div>

    <span><a href="/2023/05/08/Galois-Theory/" title="Galois Theory">Galois Theory</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%96%87%E7%8C%AE%E9%98%85%E8%AF%BB/" title="カテゴリ - 文献阅读">- 文献阅读</a>
</div>

    <span><a href="/2023/07/19/QIBLQSL/" title="A Quantum Interpretation of Bunched Logic And Quantum Separation Logic">A Quantum Interpretation of Bunched Logic And Quantum Separation Logic</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%9D%82%E6%84%9F/" title="カテゴリ - 杂感">- 杂感</a>
</div>

    <span><a href="/2022/06/27/%E5%9B%9E%E5%BF%86%E4%B8%80%E4%B8%8B%E6%9C%80%E8%BF%91%E8%AF%BB%E8%BF%87%E7%9A%84%E5%B0%8F%E8%AF%B4/" title="回忆一下最近读过的小说">回忆一下最近读过的小说</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E7%BB%98%E7%94%BB/" title="カテゴリ - 绘画">- 绘画</a>
</div>

    <span><a href="/2020/08/29/mio/" title="秋山 澪">秋山 澪</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E6%9D%82%E8%AE%B0/" title="カテゴリ - 数学杂记">- 数学杂记</a>
</div>

    <span><a href="/2023/10/06/category-theory-cambridge-answers/" title="Category Theory (Course Exercise Solutions)">Category Theory (Course Exercise Solutions)</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E6%9D%82%E8%AE%B0/" title="カテゴリ - 数学杂记">- 数学杂记</a>
</div>

    <span><a href="/2021/05/04/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/" title="线性代数翻书">线性代数翻书</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E6%9D%82%E8%AE%B0/" title="カテゴリ - 数学杂记">- 数学杂记</a>
</div>

    <span><a href="/2022/07/06/%E4%BB%A3%E6%95%B0%E6%8B%93%E6%89%91/" title="代数拓扑">代数拓扑</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>最近のコメント</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">SuBonan @ SuBonan</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2021/06/09/C C++ 语法/',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "検索…",
      empty: "「 ${query} 」については何も見つかりませんでした",
      stats: "${time} ms以内に ${hits} 件の結果が見つかりました"
    },
    valine: true,fancybox: true,copyright: 'コピーは成功しました。 <br> 再印刷については、 ％s 契約に従ってください。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
