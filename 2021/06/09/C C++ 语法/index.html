



<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="やがて、平凡な人になる" href="http://sugarsbn.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="やがて、平凡な人になる" href="http://sugarsbn.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="やがて、平凡な人になる" href="http://sugarsbn.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  

<link rel="canonical" href="http://sugarsbn.github.io/2021/06/09/C%20C++%20%E8%AF%AD%E6%B3%95/">



  <title>
C-C++ 语法 - - 计算机 |
SuBonan = やがて、平凡な人になる</title>
<meta name="generator" content="Hexo 4.2.1"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">C-C++ 语法
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2021-06-09 17:24:27">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2021-06-09T17:24:27+08:00">2021-06-09</time>
  </span>
  <span class="item" title="Symbols count in article">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">Symbols count in article</span>
    <span>26k</span>
    <span class="text">words</span>
  </span>
  <span class="item" title="Reading time">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">Reading time</span>
    <span>24 mins.</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">SuBonan</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://i.imgtg.com/2023/01/12/Q5RyI.jpg"></li>
          <li class="item" data-background-image="https://i.imgtg.com/2023/01/12/QUUdI.png"></li>
          <li class="item" data-background-image="https://i.imgtg.com/2023/01/12/Q5PW1.jpg"></li>
          <li class="item" data-background-image="https://i.imgtg.com/2023/01/12/Q5dWs.jpg"></li>
          <li class="item" data-background-image="https://i.imgtg.com/2023/01/12/QUbaD.png"></li>
          <li class="item" data-background-image="https://i.imgtg.com/2023/01/12/QUTy1.png"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" itemprop="item" rel="index" title="In - 计算机"><span itemprop="name">- 计算机</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-Hans">
  <link itemprop="mainEntityOfPage" href="http://sugarsbn.github.io/2021/06/09/C%20C++%20%E8%AF%AD%E6%B3%95/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="SuBonan">
    <meta itemprop="description" content=", やがて、平凡な人になる <br><a href="http://www.subonan.com/computer-graphics" target="_blank" rel="noopener"> 图形学作业请点这里 </a>">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="やがて、平凡な人になる">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <p>编译器越来越软，规范性越来越弱</p>
<a id="more"></a>
<div class="note default">
<p>其实 C 和 C++ 有很多相通之处</p>
</div>
<h1 id="c部分"><a class="markdownIt-Anchor" href="#c部分">#</a> C 部分</h1>
<h2 id="动态空间"><a class="markdownIt-Anchor" href="#动态空间">#</a> 动态空间</h2>
<h3 id="malloc分配空间"><a class="markdownIt-Anchor" href="#malloc分配空间">#</a> malloc 分配空间</h3>
<figure class="highlight c"><figcaption><span>malloc分配空间</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *p = <span class="built_in">malloc</span>(<span class="number">10</span> * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)  <span class="built_in">printf</span>(<span class="string">"Malloc Error!\n"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++) *(p + i) = i; </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  <span class="built_in">printf</span>(<span class="string">"%d"</span>, p[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>0123456789</p>
</blockquote>
<h2 id="高维数组"><a class="markdownIt-Anchor" href="#高维数组">#</a> 高维数组</h2>
<h3 id="高维数组奇妙写法"><a class="markdownIt-Anchor" href="#高维数组奇妙写法">#</a> 高维数组奇妙写法</h3>
<figure class="highlight c"><figcaption><span>高维数组奇妙写法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (a + <span class="number">1</span>)[<span class="number">2</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *(a + <span class="number">1</span> + <span class="number">2</span>));</span><br><span class="line">    <span class="comment">//     f[x] &lt;=&gt; *(f + x)</span></span><br><span class="line">    <span class="keyword">int</span> (*p)[<span class="number">3</span>][<span class="number">3</span>] = &amp;a;</span><br><span class="line">    <span class="keyword">int</span> (*p1)[<span class="number">3</span>] = a + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> *p2 = a[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (*(a + <span class="number">1</span>))[<span class="number">2</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *(*(a + <span class="number">1</span>) + <span class="number">2</span>));</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>6422020</p>
<p>6422020</p>
<p>0</p>
<p>0</p>
</blockquote>
<h3 id="高维数组初始化"><a class="markdownIt-Anchor" href="#高维数组初始化">#</a> 高维数组初始化</h3>
<figure class="highlight c"><figcaption><span>高维数组初始化</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[<span class="number">5</span>] = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> b = (arr+<span class="number">1</span>)[<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"is: %d\n"</span>,b);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> arr2[<span class="number">3</span>][<span class="number">3</span>] = &#123;&#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>&#125;, &#123;<span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>&#125;, &#123;<span class="number">70</span>, <span class="number">80</span>, <span class="number">90</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">int</span> c = (arr2+<span class="number">1</span>)[<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"is: %d\n"</span>,c);</span><br><span class="line">    <span class="keyword">int</span> d = (*(arr2+<span class="number">1</span>))[<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"is: %d\n"</span>,d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>is: 40</p>
<p>is: 6422004</p>
<p>is: 60</p>
</blockquote>
<h3 id="高维数组的传值"><a class="markdownIt-Anchor" href="#高维数组的传值">#</a> 高维数组的传值</h3>
<figure class="highlight c"><figcaption><span>高维数组传值</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> arr[])</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, &amp;arr);</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">1000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">5</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, &amp;a);</span><br><span class="line">    sort(a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>0<br>
6422016<br>
6421984<br>
1000</p>
</blockquote>
<h3 id="特别注意高维数组传值写法"><a class="markdownIt-Anchor" href="#特别注意高维数组传值写法">#</a> 特别注意高维数组传值写法</h3>
<figure class="highlight c"><figcaption><span>特殊注意</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">void1</span><span class="params">(<span class="keyword">int</span> a[][<span class="number">3</span>])</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">void2</span><span class="params">(<span class="keyword">int</span> (*a)[<span class="number">3</span>])</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">void void4(int **a)&#123;            // Wrong</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">    void1(arr);</span><br><span class="line">    void2(arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="共用体"><a class="markdownIt-Anchor" href="#共用体">#</a> 共用体</h2>
<figure class="highlight c"><figcaption><span>共用体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">union</span> Node&#123;</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">char</span> b;</span><br><span class="line">&#125; Node;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node1</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">&#125; Node1;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Node a;</span><br><span class="line">    a.a = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a.a);</span><br><span class="line">    a.b = <span class="string">'a'</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a.a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">    Node1 b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3<br>
97<br>
4</p>
</blockquote>
<div class="note info">
<p>由于共用体成员共享一段内存地址，所以改变其中一个的值其他值也会改变</p>
</div>
<h2 id="函数指针"><a class="markdownIt-Anchor" href="#函数指针">#</a> 函数指针</h2>
<h3 id="函数指针-2"><a class="markdownIt-Anchor" href="#函数指针-2">#</a> 函数指针</h3>
<figure class="highlight c"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare1</span><span class="params">(<span class="keyword">void</span> <span class="keyword">const</span> * A,  <span class="keyword">void</span> <span class="keyword">const</span> *B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (*(<span class="keyword">int</span> *)A == *(<span class="keyword">int</span> *)B) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare2</span><span class="params">(<span class="keyword">void</span> <span class="keyword">const</span> * A,  <span class="keyword">void</span> <span class="keyword">const</span> *B)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (*(<span class="keyword">char</span> *)A == *(<span class="keyword">char</span> *)B) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">void</span> *a, <span class="keyword">void</span> *b, <span class="keyword">int</span> (*compare)(<span class="keyword">void</span> <span class="keyword">const</span> *A, <span class="keyword">void</span> <span class="keyword">const</span> *B))</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (compare(a, b))  <span class="built_in">printf</span>(<span class="string">"yes!\n"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"no!\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> (*func[])(<span class="keyword">void</span> <span class="keyword">const</span> *, <span class="keyword">void</span> <span class="keyword">const</span> *) = &#123;compare1, compare2&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *p1, *p2;</span><br><span class="line">    <span class="keyword">char</span> *c1, *c2;</span><br><span class="line">    p1 = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">4</span>);p2 = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="number">4</span>); </span><br><span class="line">    c1 = (<span class="keyword">char</span>*) <span class="built_in">malloc</span>(<span class="number">1</span>); c2 = (<span class="keyword">char</span>*) <span class="built_in">malloc</span>(<span class="number">1</span>);</span><br><span class="line">    *p1 = <span class="number">1</span>; *p2 = <span class="number">2</span>;</span><br><span class="line">    *c1 = <span class="string">'a'</span>; *c2 = <span class="string">'a'</span>;</span><br><span class="line">    search(p1, p2, compare1);</span><br><span class="line">    search(c1, c2, compare2);</span><br><span class="line">    search(c1, c2, compare1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, func[<span class="number">0</span>](p1, p2));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, argc);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>no!<br>
yes!<br>
yes!<br>
0<br>
1</p>
</blockquote>
<div class="note info">
<p>根据我的理解 void 出现在函数参数里起到的泛型的作用，而 int *compare (…,…) 起到了传一个函数进去的作用</p>
</div>
<h2 id="宏"><a class="markdownIt-Anchor" href="#宏">#</a> 宏</h2>
<h3 id="宏的特殊用法"><a class="markdownIt-Anchor" href="#宏的特殊用法">#</a> 宏的特殊用法</h3>
<figure class="highlight c"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Conn(x, y) x##y</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ToChar(x) *#x</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ToString(x) #x</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, Conn(<span class="number">123</span>, <span class="number">456</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%c\n"</span>, ToChar(<span class="number">5</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ToString(<span class="number">123456</span>));</span><br><span class="line">    <span class="keyword">char</span> *p = ToString(<span class="number">12345678912381098309213</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="keyword">sizeof</span>(p));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>123456<br>
5<br>
123456<br>
8<br>
12345678912381098309213</p>
</blockquote>
<div class="note info">
<p>注意 char * 的 size 恒为 8</p>
</div>
<h2 id="柔性数组"><a class="markdownIt-Anchor" href="#柔性数组">#</a> 柔性数组</h2>
<figure class="highlight c"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">SoftStruct</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">array</span>[];</span><br><span class="line">&#125; SoftStruct;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SoftStruct a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">    SoftStruct *p;</span><br><span class="line">    p = (SoftStruct*) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) + <span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (<span class="number">10</span>));</span><br><span class="line">    p -&gt; len = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; (p -&gt; len);i++)  (p -&gt; <span class="built_in">array</span>[i]) = i;   </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; (p -&gt; len);i++)  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p -&gt; <span class="built_in">array</span>[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>4<br>
0<br>
1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9</p>
</blockquote>
<div class="note info">
<p>注意在结构体里最后一个成员变量 int array [] 并没有占空间，使用时才动态分配空间，且得到和其他成员变量连续的内存空间</p>
</div>
<h2 id="字符串相关"><a class="markdownIt-Anchor" href="#字符串相关">#</a> 字符串相关</h2>
<h3 id="初始化"><a class="markdownIt-Anchor" href="#初始化">#</a> 初始化</h3>
<figure class="highlight c"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span>* str = <span class="string">"Hello"</span>;                        <span class="comment">// 已经进行了内存分配，str = (char*) malloc(6 * sizeof(char))</span></span><br><span class="line">    <span class="keyword">char</span> str1[<span class="number">5</span>] = <span class="string">"Hell"</span>;                      </span><br><span class="line">    <span class="keyword">char</span> str2[<span class="number">5</span>] = &#123;<span class="string">'H'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'\0'</span>&#125;;  <span class="comment">// str1 &lt;=&gt; str2 等价</span></span><br><span class="line">    <span class="keyword">char</span> str3[<span class="number">5</span>] = <span class="string">"Hello"</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, str3);                          <span class="comment">//注意str3最后少了个'\0',所以会继续打印连续地址村的str2</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, str3, str2, str1);     <span class="comment">//内存: H e l l o H e l l \0 H e l l \0</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%c\n"</span>, *(str + <span class="number">1</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"str1 : %d %s\n"</span>, <span class="keyword">sizeof</span>(str1), str1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"str2 : %d %s\n"</span>, <span class="keyword">sizeof</span>(str2), str2);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, str1 == str2);</span><br><span class="line">    str2[<span class="number">2</span>] = <span class="string">'\0'</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"str2: %d %s\n"</span>, <span class="built_in">strlen</span>(str2), str2);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%c\n"</span>, *(str2 + <span class="number">3</span>));</span><br><span class="line">    <span class="keyword">int</span>* intP = (<span class="keyword">int</span>*) <span class="built_in">malloc</span>(<span class="number">5</span> * <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    intP[<span class="number">4</span>] = <span class="number">5</span>;   *(intP + <span class="number">4</span>) = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>HelloHell<br>
6422017 6422022 6422027<br>
e<br>
str1 : 5 Hell<br>
str2 : 5 Hell<br>
0<br>
str2: 2 He<br>
l</p>
</blockquote>
<h3 id="strcpy函数"><a class="markdownIt-Anchor" href="#strcpy函数">#</a> strcpy 函数</h3>
<figure class="highlight c"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">char</span> *str = <span class="string">"hello world"</span>;</span><br><span class="line">    <span class="keyword">char</span> (*q)[<span class="number">2</span>] = &amp;buf;</span><br><span class="line">    <span class="built_in">strcpy</span>(buf,str);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"buf:%s\nsizeof(buf) = %ld\nstrlen(buf) = %ld\n"</span>,</span><br><span class="line">           buf,<span class="keyword">sizeof</span>(buf),<span class="built_in">strlen</span>(buf));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, str, &amp;str, buf);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> buf1[<span class="number">20</span>];</span><br><span class="line">    <span class="built_in">strncpy</span>(buf1,str,<span class="number">20</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"buf1:%s\nsizeof(buf1) = %ld\nstrlen(buf1) = %ld\n"</span>,</span><br><span class="line">           buf1,<span class="keyword">sizeof</span>(buf1),<span class="built_in">strlen</span>(buf1));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, str, &amp;str, buf);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>buf:hello world<br>
sizeof(buf) = 2<br>
strlen(buf) = 11<br>
4210688 6422032 6422046<br>
buf1:hello world<br>
sizeof(buf1) = 20<br>
strlen(buf1) = 11<br>
4210688 6422032 6422046</p>
</blockquote>
<div class="note info">
<p>注意 sizeof 是在编译时运算的分配的空间，而 strlen 是运行时遍历到第一个 \0，strcpy 原字符串长度过长时会引起覆盖掉 \0 导致不受控制的内存覆盖</p>
</div>
<h3 id="strcmp函数"><a class="markdownIt-Anchor" href="#strcmp函数">#</a> strcmp 函数</h3>
<figure class="highlight c++"><figcaption><span>strcmp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a[] = <span class="string">"abc"</span>;</span><br><span class="line">    <span class="keyword">char</span> b[] = <span class="string">"ab"</span>;</span><br><span class="line">    <span class="keyword">char</span> c[] = <span class="string">"ad"</span>;</span><br><span class="line">    <span class="keyword">char</span> d[] = <span class="string">"d"</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strcmp(\"abc\", \"ab\")=%d\n"</span>, <span class="built_in">strcmp</span>(a, b));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strcmp(\"ab\", \"abc\")=%d\n"</span>, <span class="built_in">strcmp</span>(b, a));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strcmp(\"ab\", \"ab\")=%d\n"</span>, <span class="built_in">strcmp</span>(b, b));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"strcmp(\"ad\", \"abc\")=%d\n"</span>, <span class="built_in">strcmp</span>(c, a));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>strcmp(“abc”, “ab”)=1<br>
strcmp(“ab”, “abc”)=-1<br>
strcmp(“ab”, “ab”)=0<br>
strcmp(“ad”, “abc”)=1</p>
</blockquote>
<div class="note info">
<p>就是字典序，大于输出 1，小于输出 - 1，等于输出 0.（为啥要记这东西</p>
</div>
<h3 id="存储区域"><a class="markdownIt-Anchor" href="#存储区域">#</a> 存储区域</h3>
<figure class="highlight c++"><figcaption><span>char* 与 char[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a[<span class="number">6</span>] = <span class="string">"hello"</span>;</span><br><span class="line">	<span class="keyword">char</span> *p = <span class="string">"123"</span>;</span><br><span class="line">    <span class="built_in">strcat</span>(a, p);	<span class="comment">//没问题,a="hello123"</span></span><br><span class="line">    <span class="built_in">strcat</span>(p, a);   <span class="comment">//错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
<p>注意到，“123” 储存在常量区，而 char *p 在编译时就确定指向了它，不可被更改。而 char a [6] 字符数组在运行时才被初始化为”hello“，相当于在堆上 malloc 了一个空间。</p>
</div>
<h2 id="指针初步"><a class="markdownIt-Anchor" href="#指针初步">#</a> 指针初步</h2>
<figure class="highlight c"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span>* b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap1</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> *b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t = *a;</span><br><span class="line">	*a = *b;</span><br><span class="line">	*b = t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">    swap(&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a is %d, b is %d\n"</span>, a,b);</span><br><span class="line">    swap1(&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a is %d, b is %d\n"</span>, a,b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>a is 10, b is 20<br>
a is 20, b is 10</p>
</blockquote>
<figure class="highlight c"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%x\n"</span>, &amp;a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span>* p;</span><br><span class="line">    p = &amp;a;</span><br><span class="line">    <span class="keyword">int</span> *p1;</span><br><span class="line">    *p1 = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%x %x\n"</span>, p1, *p1);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"p is %x\n"</span>, p);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"*p is %d\n"</span>, *p);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>* p2 = (<span class="keyword">int</span>*)<span class="number">0x61fe04</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"*p2 is %d\n"</span>, *p2);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%x "</span>, &amp;a);</span><br><span class="line">    func(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>c013c0 a<br>
p is 61fe04<br>
*p is 10<br>
*p2 is 10<br>
61fe04 61fde0</p>
</blockquote>
<h1 id="c部分-2"><a class="markdownIt-Anchor" href="#c部分-2">#</a> C++ 部分</h1>
<h2 id="运算优先级"><a class="markdownIt-Anchor" href="#运算优先级">#</a> 运算优先级</h2>
<figure class="highlight c++"><figcaption><span>demo1.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> u;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  a[i].u = i + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    A* p = a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (++p)-&gt;u &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; p - a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++) <span class="built_in">cout</span> &lt;&lt; a[i].u &lt;&lt; <span class="string">" "</span>;<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ++p-&gt;u &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; p - a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++) <span class="built_in">cout</span> &lt;&lt; a[i].u &lt;&lt; <span class="string">" "</span>;<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>2<br>
1<br>
1 2 3 4 5 6 7 8 9 10<br>
3<br>
1<br>
1 3 3 4 5 6 7 8 9 10</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo2.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  a[i] = <span class="number">10</span> - i;</span><br><span class="line">    <span class="keyword">int</span> *p = a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *p++ &lt;&lt; <span class="built_in">endl</span>;       <span class="comment">//&lt;=&gt; *(p++);</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; p - a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  <span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">" "</span>;<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  a[i] = <span class="number">10</span> - i;</span><br><span class="line">    p = a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (*p)++ &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; p - a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  <span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">" "</span>;<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    p = a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *p + <span class="number">2</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>10<br>
1<br>
10 9 8 7 6 5 4 3 2 1<br>
10<br>
0<br>
11 9 8 7 6 5 4 3 2 1<br>
13</p>
</blockquote>
<h2 id="伪局部函数"><a class="markdownIt-Anchor" href="#伪局部函数">#</a> （伪）局部函数</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;                 <span class="comment">//重载()实现伪函数</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"HELLO"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; foo;</span><br><span class="line"> </span><br><span class="line">    foo();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; foo(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>HELLO<br>
3</p>
</blockquote>
<h2 id="纯虚函数和抽象类"><a class="markdownIt-Anchor" href="#纯虚函数和抽象类">#</a> 纯虚函数和抽象类</h2>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">func</span><span class="params">()</span> </span>= <span class="number">0</span>;        <span class="comment">//只有virtual才能声明=0</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A&#123;                     <span class="comment">// A限制了B必须重写实现func()才可以被实例化</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    B b;</span><br><span class="line">    b.func();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Hello</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello!"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span></span>=<span class="keyword">delete</span>; <span class="comment">//这样禁止了所有的B的实例调用func()函数</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        C()=<span class="keyword">delete</span>;         <span class="comment">//特别地，把构造函数delete掉，则C永远无法实例化</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    B b;</span><br><span class="line">    <span class="comment">//b.func()			错误</span></span><br><span class="line">    <span class="comment">//C c;				错误，无法实例化</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="仿函数"><a class="markdownIt-Anchor" href="#仿函数">#</a> 仿函数</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Class_Func</span>&#123;</span>   <span class="comment">//虽然他是个类，但却起到函数的作用。</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">bool</span> <span class="title">operator</span> <span class="params">()</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> num == <span class="number">10</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        </span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num == <span class="number">10</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> len, Class_Func f)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    For(i, <span class="number">0</span>, len)   <span class="keyword">if</span> (f(a[i]))    res++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> len, <span class="keyword">bool</span> (*func)(<span class="keyword">int</span> num))</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    For(i, <span class="number">0</span>, len)   <span class="keyword">if</span> (func(a[i]))    res++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">5</span>] = &#123;<span class="number">10</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">1</span>,<span class="number">10</span>&#125;;</span><br><span class="line">    Class_Func t;</span><br><span class="line">    cal(a, <span class="number">5</span>, t);       <span class="comment">//传了个类的对象进去，但是用处是作为一个函数</span></span><br><span class="line">    cal(a, <span class="number">5</span>, Class_Func());   <span class="comment">//这么写也可以</span></span><br><span class="line">    cal(a, <span class="number">5</span>, func);    <span class="comment">//当然写函数指针也可以</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3<br>
3<br>
3</p>
</blockquote>
<h2 id="分配内存"><a class="markdownIt-Anchor" href="#分配内存">#</a> 分配内存</h2>
<h3 id="bad版"><a class="markdownIt-Anchor" href="#bad版">#</a> bad 版</h3>
<figure class="highlight c++"><figcaption><span>stringbad.h</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringBad</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">char</span> * str;                <span class="comment">// pointer to string</span></span><br><span class="line">    <span class="keyword">int</span> len;                   <span class="comment">// length of string</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> num_strings;    <span class="comment">// number of objects</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    StringBad(<span class="keyword">const</span> <span class="keyword">char</span> * s); <span class="comment">// constructor</span></span><br><span class="line">    StringBad();               <span class="comment">// default constructor</span></span><br><span class="line">    ~StringBad();              <span class="comment">// destructor</span></span><br><span class="line"><span class="comment">// friend function</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="built_in">std</span>::ostream &amp; <span class="keyword">operator</span>&lt;&lt;(<span class="built_in">std</span>::ostream &amp; os, </span><br><span class="line">                       <span class="keyword">const</span> StringBad &amp; st);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>stringbad.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// initializing static class member</span></span><br><span class="line"><span class="keyword">int</span> StringBad::num_strings = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// class methods</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// construct StringBad from C string</span></span><br><span class="line">StringBad::StringBad(<span class="keyword">const</span> <span class="keyword">char</span> * s)</span><br><span class="line">&#123;</span><br><span class="line">    len = <span class="built_in">std</span>::<span class="built_in">strlen</span>(s);             <span class="comment">// set size</span></span><br><span class="line">    str = <span class="keyword">new</span> <span class="keyword">char</span>[len + <span class="number">1</span>];          <span class="comment">// allot storage</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">strcpy</span>(str, s);              <span class="comment">// initialize pointer</span></span><br><span class="line">    num_strings++;                    <span class="comment">// set object count</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; num_strings &lt;&lt; <span class="string">": \""</span> &lt;&lt; str</span><br><span class="line">         &lt;&lt; <span class="string">"\" object created\n"</span>;    <span class="comment">// For Your Information</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">StringBad::StringBad()                <span class="comment">// default constructor</span></span><br><span class="line">&#123;</span><br><span class="line">    len = <span class="number">4</span>;</span><br><span class="line">    str = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">4</span>];</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">strcpy</span>(str, <span class="string">"C++"</span>);          <span class="comment">// default string</span></span><br><span class="line">    num_strings++;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; num_strings &lt;&lt; <span class="string">": \""</span> &lt;&lt; str</span><br><span class="line">         &lt;&lt; <span class="string">"\" default object created\n"</span>;  <span class="comment">// FYI</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">StringBad::~StringBad()               <span class="comment">// necessary destructor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"\""</span> &lt;&lt; str &lt;&lt; <span class="string">"\" object deleted, "</span>;    <span class="comment">// FYI</span></span><br><span class="line">    --num_strings;                    <span class="comment">// required</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; num_strings &lt;&lt; <span class="string">" left\n"</span>; <span class="comment">// FYI</span></span><br><span class="line">    <span class="keyword">delete</span> [] str;                    <span class="comment">// required</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::ostream &amp; <span class="keyword">operator</span>&lt;&lt;(<span class="built_in">std</span>::ostream &amp; os, <span class="keyword">const</span> StringBad &amp; st)</span><br><span class="line">&#123;</span><br><span class="line">    os &lt;&lt; st.str;</span><br><span class="line">    <span class="keyword">return</span> os; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>vegnew.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vegnews.cpp -- using new and delete with classes</span></span><br><span class="line"><span class="comment">// compile with strngbad.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"strngbad.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callme1</span><span class="params">(StringBad &amp;)</span></span>;  <span class="comment">// pass by reference</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callme2</span><span class="params">(StringBad)</span></span>;    <span class="comment">// pass by value</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Starting an inner block.\n"</span>;</span><br><span class="line">        <span class="function">StringBad <span class="title">headline1</span><span class="params">(<span class="string">"Celery Stalks at Midnight"</span>)</span></span>;</span><br><span class="line">        <span class="function">StringBad <span class="title">headline2</span><span class="params">(<span class="string">"Lettuce Prey"</span>)</span></span>;</span><br><span class="line">        <span class="function">StringBad <span class="title">sports</span><span class="params">(<span class="string">"Spinach Leaves Bowl for Dollars"</span>)</span></span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"headline1: "</span> &lt;&lt; headline1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"headline2: "</span> &lt;&lt; headline2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"sports: "</span> &lt;&lt; sports &lt;&lt; <span class="built_in">endl</span>;   <span class="comment">//到这里创建了三个StringBad对象</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        callme1(headline1);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"headline1: "</span> &lt;&lt; headline1 &lt;&lt; <span class="built_in">endl</span>; <span class="comment">//这里输出headline1传引用未发生意外</span></span><br><span class="line">        callme2(headline2);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"headline2: "</span> &lt;&lt; headline2 &lt;&lt; <span class="built_in">endl</span>; <span class="comment">//这里将headline传值进入函数，而值出栈时会调用其析构函数</span></span><br><span class="line">                                                    <span class="comment">//但我在疑惑，明明传入时复制拷贝了一个对象，</span></span><br><span class="line">                                                    <span class="comment">//应该调用的是复制的对象的析构函数啊，为什么导致headline2空了呐</span></span><br><span class="line">                                                    <span class="comment">//发现赋值时，调用的是默认的*复制构造函数*，即BadString(const BadString &amp;s)</span></span><br><span class="line">                                                    <span class="comment">//而其实现中有一句str = s.str;导致复制的对象和headline2的str指向同一块地址！</span></span><br><span class="line">                                                    <span class="comment">//所以复制的对象析构时直接把headline2的str也给delete了</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Initialize one object to another:\n"</span>;</span><br><span class="line">        StringBad sailor = sports;                  <span class="comment">//这里调用的也是默认的*复制构造函数*，即sailor=BadString(sports)</span></span><br><span class="line">                                                    <span class="comment">//这里计数器每增加是因为用*复制构造函数*创建的对象都不应该计数</span></span><br><span class="line">                                                    <span class="comment">//因为复制的对象str和原对象指向同一块地址！</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"sailor: "</span> &lt;&lt; sailor &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Assign one object to another:\n"</span>;</span><br><span class="line">        StringBad knot;</span><br><span class="line">        knot = headline1;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"knot: "</span> &lt;&lt; knot &lt;&lt; <span class="built_in">endl</span>;           <span class="comment">//这里会先调用默认无参构造函数，再赋值过去</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;               <span class="comment">//接下来是析构部分</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Exiting the block.\n"</span>;     <span class="comment">//这里会re，因为在headline2析构时，headline2的str早就被delete掉了</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"End of main()\n"</span>;</span><br><span class="line">    <span class="comment">// std::cin.get();</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callme1</span><span class="params">(StringBad &amp; rsb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"String passed by reference:\n"</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"    \""</span> &lt;&lt; rsb &lt;&lt; <span class="string">"\"\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">callme2</span><span class="params">(StringBad sb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"String passed by value:\n"</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"    \""</span> &lt;&lt; sb &lt;&lt; <span class="string">"\"\n"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Starting an inner block.<br>
1: “Celery Stalks at Midnight” object created<br>
2: “Lettuce Prey” object created<br>
3: “Spinach Leaves Bowl for Dollars” object created<br>
headline1: Celery Stalks at Midnight<br>
headline2: Lettuce Prey<br>
sports: Spinach Leaves Bowl for Dollars</p>
<p>String passed by reference:<br>
“Celery Stalks at Midnight”<br>
headline1: Celery Stalks at Midnight<br>
String passed by value:<br>
“Lettuce Prey”<br>
“Lettuce Prey” object deleted, 2 left<br>
headline2:</p>
<p>Initialize one object to another:<br>
sailor: Spinach Leaves Bowl for Dollars<br>
Assign one object to another:<br>
3: “C++” default object created<br>
knot: Celery Stalks at Midnight</p>
<p>Exiting the block.<br>
“Celery Stalks at Midnight” object deleted, 2 left<br>
“Spinach Leaves Bowl for Dollars” object deleted, 1 left<br>
&quot; 衑？</p>
</blockquote>
<h3 id="good版"><a class="markdownIt-Anchor" href="#good版">#</a> good 版</h3>
<ul>
<li>good 版就是重写了 BadString (const BadString &amp; s)、BadString &amp; operator = (const BadString &amp; s) 之类的一切<ins>可能产生复制对象</ins>的函数，把其中的 str = s.str 改成 str = new char [strlen (s.str) + 1], strcpy (str, s.str)。一定要手动新分配内存。</li>
</ul>
<h2 id="构造函数和析构函数"><a class="markdownIt-Anchor" href="#构造函数和析构函数">#</a> 构造函数和析构函数</h2>
<h3 id="对象和指针的析构顺序"><a class="markdownIt-Anchor" href="#对象和指针的析构顺序">#</a> 对象和指针的析构顺序</h3>
<figure class="highlight c++"><figcaption><span>stock.h</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stock</span>&#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="built_in">string</span> company;</span><br><span class="line">        <span class="keyword">long</span> shares;</span><br><span class="line">        <span class="keyword">double</span> share_val;</span><br><span class="line">        <span class="keyword">double</span> total_val;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set_tot</span><span class="params">()</span></span>&#123;total_val = share_val * shares;&#125;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        Stock();</span><br><span class="line">        Stock(<span class="keyword">const</span> <span class="built_in">string</span> &amp;co);</span><br><span class="line">        <span class="keyword">virtual</span> ~Stock();</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">buy</span><span class="params">(<span class="keyword">long</span> num, <span class="keyword">double</span> price)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">sell</span><span class="params">(<span class="keyword">long</span> num, <span class="keyword">double</span> price)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">double</span> price)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>stock.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Stock::Stock()&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Stock default constructor is called!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    company = <span class="string">"no name"</span>;</span><br><span class="line">&#125;</span><br><span class="line">Stock::Stock(<span class="keyword">const</span> <span class="built_in">string</span> &amp;co):company(co)&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Stock constructor with parameter is called!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">Stock::~Stock()&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Bye!"</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; company &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> Stock::show()&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; company &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Stock B = (<span class="built_in">string</span>)<span class="string">"B"</span>;      <span class="comment">//等价于 Stock B = Stock((string)"B");</span></span><br><span class="line">    Stock* A = <span class="keyword">new</span> Stock();</span><br><span class="line">    <span class="keyword">delete</span> A;</span><br><span class="line">   <span class="comment">// return 0;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Stock constructor with parameter is called!<br>
Stock default constructor is called!<br>
Bye! no name<br>
Bye! B</p>
</blockquote>
<div class="note info">
<p>可以注意到默认的析构函数总是在出栈时调用（即总在手写实现 delete 后面</p>
</div>
<h3 id="继承的构造与析构"><a class="markdownIt-Anchor" href="#继承的构造与析构">#</a> 继承的构造与析构</h3>
<figure class="highlight c++"><figcaption><span>demo.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseDemo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        BaseDemo() <span class="comment">// Constructor</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"This is the BaseDemo constructor. \n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ~BaseDemo() <span class="comment">// Destructor</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"This is the BaseDemo destructor.\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"show from Base Demo!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Derived class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeriDemo</span> :</span> <span class="keyword">public</span> BaseDemo</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        DeriDemo() <span class="comment">// Constructor</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"This is the DeriDemo constructor.\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ~DeriDemo() <span class="comment">// Destructor</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"This is the DeriDemo destructor.\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"show from DeriDemo"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DeriDemo *A = <span class="keyword">new</span> DeriDemo();</span><br><span class="line">    <span class="keyword">delete</span> A;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">    BaseDemo *B = <span class="keyword">new</span> DeriDemo();</span><br><span class="line">    B -&gt; show();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This is the BaseDemo constructor.<br>
This is the DeriDemo constructor.<br>
This is the DeriDemo destructor.<br>
This is the BaseDemo destructor.</p>
<p>This is the BaseDemo constructor.<br>
This is the DeriDemo constructor.<br>
show from DeriDemo</p>
</blockquote>
<div class="note info">
<p>可以注意到构造函数从基类开始，析构函数从派生类开始。此外，指针 new 的或者 malloc 分配的对象地址不手动删除时不会被自动 delete 掉。这里还可以注意下 B 虽然是基类指针却指向一个派生类，而虚函数 show 很好的体现了指针对象的类别。</p>
</div>
<div class="note success">
<p>而特别地，C++ 中将类的析构函数写成虚函数是很好的习惯。防止在多态时用基类指针指向派生类时，析构却没有调用派生类析构函数导致内存泄漏。</p>
</div>
<div class="note info">
<p>进一步地，为什么要用基类指针指向派生类呢？这就是继承与多态的内容了。可以理解多态为 “接受来自基类的同一指令，但却根据不同的派生类产生不同的行为”。譬如基类是 “图形”，而它的派生类有 “矩形”“三角形”“圆” 等等。而图形都可以求面积，所以 getArea () 函数应该写在基类里，并且写成虚函数，根据不同的派生类进行不同的面积公式计算。而 “接受同一指令” 即需要使用基类指针。即我不关心你究竟是三角形还是矩形，我只关心其可以求面积。事实上就是把<ins>接口与实现分离</ins>.{dot}，基类的虚函数说明了对外界能使用的函数信息，不同的派生类进行自己独特的实现。</p>
</div>
<h3 id="多继承"><a class="markdownIt-Anchor" href="#多继承">#</a> 多继承</h3>
<figure class="highlight c++"><figcaption><span>djc.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    A()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"A()\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~A()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"~A()\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A&#123;</span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    B()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"B()\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~B()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"~B()\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    C()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"C()\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~C()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"~C()\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> :</span> <span class="keyword">public</span> C, <span class="keyword">public</span> B&#123;</span><br><span class="line"><span class="keyword">public</span>:   </span><br><span class="line">    D()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"D()\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~D()&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"~D()\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">D <span class="title">d</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>C()<br>
A()<br>
B()<br>
D()<br>
~D()<br>
~B()<br>
~A()<br>
~C()</p>
</blockquote>
<ul>
<li>D 继承自 C,B，B 继承自 A。同级间写在前面的先构造，即要构造 D，先构造 C，然后构造 B，要构造 B，先构造 A，于是构造顺序为 C-A-B-D</li>
</ul>
<h2 id="局部类"><a class="markdownIt-Anchor" href="#局部类">#</a> 局部类</h2>
<figure class="highlight c++"><figcaption><span>jbl.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">c4</span></span></span><br><span class="line"><span class="class">    &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">int</span> a;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;a = <span class="number">4</span>;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">c4</span> <span class="title">ff</span>;</span></span><br><span class="line">    ff.foo();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ff.a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>这个用处属实少</li>
</ul>
<h2 id="类继承"><a class="markdownIt-Anchor" href="#类继承">#</a> 类继承</h2>
<p>这部分不想给 demo 了，主要是注意几个点：</p>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//A是一个类</span></span><br><span class="line">A a;			<span class="comment">//等价于调用默认构造函数 A a = A();			 A()</span></span><br><span class="line"><span class="function">A <span class="title">a</span><span class="params">()</span></span>;			<span class="comment">//不会创建对象，等价于定义了一个返回值是A的函数，没有函数体</span></span><br><span class="line">A a = b;		<span class="comment">//等价于调用默认复制构造函数 A a = A(b);			A(const A &amp;a)</span></span><br><span class="line">A a;</span><br><span class="line">a = b;		    <span class="comment">//等价于先调用默认构造函数A a = A();然后调用A.operator = (const A &amp;a)复制··</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(A a)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	A a;</span><br><span class="line">    func(a);		<span class="comment">//实际上，传值进去时，会先调用复制构造函数A(const A &amp;a)复制一个新的对象</span></span><br><span class="line">    			    <span class="comment">//函数结束后，会调用复制的对象的析构函数</span></span><br><span class="line">    				<span class="comment">//如果不手写A(const A&amp; a),很有可能导致a中指针类型成员变量和复制出来的对象指向同一块						地址，在析构时被delete掉。详见分配内存bad版</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>demo3</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Person(<span class="keyword">int</span> _id, <span class="keyword">char</span>* _name);</span><br><span class="line">    ~Person();</span><br><span class="line">    Person();</span><br><span class="line">    Person(<span class="keyword">const</span> Person&amp; pr)=<span class="keyword">delete</span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Person&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Person&amp; pr)=<span class="keyword">delete</span>;	<span class="comment">//删除一定的构造方法和运算符可以限制类的使用</span></span><br><span class="line">    										<span class="comment">//譬如这个类就无法被复制，也无法被赋值，可以避免被函数传值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> id; </span><br><span class="line">    <span class="keyword">char</span>* name;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> counter;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="枚举类"><a class="markdownIt-Anchor" href="#枚举类">#</a> 枚举类</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Weekdays&#123;</span><br><span class="line">    MON, TUE, WED, THU = <span class="number">6</span>, FRI, SAT, SUN</span><br><span class="line">&#125;;          <span class="comment">//类似于#define MON 0 #define TUE 1...但是方便写和维护</span></span><br><span class="line">		   <span class="comment">//不写默认升序。这个例子中MON=0,TUE=1,WED=2,THU=6,FRI=7,SAT=8,SUN=9</span></span><br><span class="line">		   <span class="comment">//实际上就是把抽象的编码信息变成可读的变量名。例如1你不知道他在说什么1，但是MON就知道是指星期一</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Weekdays rua = WED;</span><br><span class="line">    <span class="keyword">switch</span>(rua)&#123;</span><br><span class="line">        <span class="keyword">case</span> MON:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> TUE:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="命名空间"><a class="markdownIt-Anchor" href="#命名空间">#</a> 命名空间</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> myspace1</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">extern</span> <span class="keyword">int</span> gvar;<span class="comment">//内部声明</span></span><br><span class="line">	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line">	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">myclass</span></span></span><br><span class="line"><span class="class">	&#123;</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">		</span>&#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;<span class="string">"in space1,gvar="</span>&lt;&lt;gvar&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> myspace2</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line">	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">5</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">myclass</span></span></span><br><span class="line"><span class="class">	&#123;</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;<span class="string">"in space2"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">namespace</span> nestedspace</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">ExternFunc</span><span class="params">()</span></span>;<span class="comment">//内部声明</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//外部定义</span></span><br><span class="line"><span class="keyword">int</span> myspace1::gvar=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">void</span> myspace2::nestedspace::ExternFunc()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="string">"in nestedspace"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	myspace1::myclass obj1;</span><br><span class="line">	obj1.<span class="built_in">print</span>();</span><br><span class="line">	myspace2::myclass obj2;</span><br><span class="line">	obj2.<span class="built_in">print</span>();</span><br><span class="line">	myspace2::nestedspace::ExternFunc();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>in space1,gvar=1<br>
in space2<br>
in nestedspace</p>
</blockquote>
<div class="note info">
<p>注意” 外部定义 “+” 内部声明 “和” 内部声明 “+” 外部实现 “的操作，虽然我也不知道为啥，明明内部定义 + 内部实现挺不错啊据说老版本会报错</p>
</div>
<figure class="highlight c++"><figcaption><span>匿名命名空间</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">double</span> dvar=<span class="number">1.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="string">"dvar:"</span>&lt;&lt;dvar&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">show2</span><span class="params">()</span></span>;</span><br><span class="line">	show1();</span><br><span class="line">	show2();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//a.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> dvar=<span class="number">2.8</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="string">"dvar:"</span>&lt;&lt;dvar&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1.8</p>
<p>2.8</p>
</blockquote>
<div class="note info">
<p>匿名命名空间可以将 struct 和 class 的对象前都加上”static“修饰，如果定义了相同的变量名也不会报错。匿名命名空间中的变量仅在包含该匿名命名空间的源文件中可见。</p>
</div>
<h2 id="模板"><a class="markdownIt-Anchor" href="#模板">#</a> 模板</h2>
<figure class="highlight c++"><figcaption><span>模板函数</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> T &amp;a, <span class="keyword">const</span> T &amp;b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a == b ? <span class="number">0</span> : (a &gt; b ? <span class="number">1</span> : <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; compare(<span class="number">1</span>, <span class="number">2</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; compare(<span class="string">"a"</span>, <span class="string">"b"</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; compare(<span class="string">'a'</span>, <span class="string">'b'</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-1<br>
1<br>
-1</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>模板类</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt; <span class="title">class</span> <span class="title">Queue</span> &#123;</span></span><br><span class="line">     <span class="keyword">public</span>:</span><br><span class="line">         Queue ();                <span class="comment">// default constructor</span></span><br><span class="line">         <span class="function">T &amp;<span class="title">front</span> <span class="params">()</span></span>;          <span class="comment">// return element from head of Queue</span></span><br><span class="line">         <span class="function"><span class="keyword">const</span> T &amp;<span class="title">front</span> <span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">         <span class="function"><span class="keyword">void</span> <span class="title">push</span> <span class="params">(<span class="keyword">const</span> T &amp;)</span></span>; <span class="comment">// add element to back of Queue</span></span><br><span class="line">         <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span></span>;              <span class="comment">// remove element from head of Queue</span></span><br><span class="line">         <span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="keyword">const</span></span>;      <span class="comment">// true if no elements in the Queue</span></span><br><span class="line">     <span class="keyword">private</span>:</span><br><span class="line">         <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Queue&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    Queue&lt;<span class="keyword">char</span>&gt; Q1;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="嵌套类"><a class="markdownIt-Anchor" href="#嵌套类">#</a> 嵌套类</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">c1</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">c2</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">int</span> a;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>;</span><br><span class="line">    &#125; b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">void</span> c1::foo()&#123;</span><br><span class="line">    a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> c1::c2::foo()&#123;</span><br><span class="line">    a = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">c1</span> <span class="title">f</span>;</span></span><br><span class="line">    f.foo();</span><br><span class="line">    f.b.foo();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f.a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f.b.a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1<br>
2</p>
</blockquote>
<h2 id="虚函数"><a class="markdownIt-Anchor" href="#虚函数">#</a> 虚函数</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"This is A"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"This is B"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    B b;</span><br><span class="line">    A *p1 = &amp;a;</span><br><span class="line">    A *p2 = &amp;b;</span><br><span class="line">    p1-&gt;<span class="built_in">print</span>();</span><br><span class="line">    p2-&gt;<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This is A<br>
This is A</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"This is A"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"This is B"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    B b;</span><br><span class="line">    A *p1 = &amp;a;</span><br><span class="line">    A *p2 = &amp;b;</span><br><span class="line">    p1-&gt;<span class="built_in">print</span>();</span><br><span class="line">    p2-&gt;<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>This is A<br>
This is B</p>
</blockquote>
<h2 id="异常"><a class="markdownIt-Anchor" href="#异常">#</a> 异常</h2>
<figure class="highlight c++"><figcaption><span>char*异常</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">throw</span> <span class="string">"rua!"</span>;</span><br><span class="line">    a /= b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        divide(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(<span class="keyword">const</span> <span class="keyword">char</span>* e)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>rua!</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>自定义异常</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myexception</span> :</span> <span class="keyword">public</span> <span class="built_in">std</span>::exception &#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line">  myexception(<span class="built_in">std</span>::<span class="built_in">string</span> s) : message(s)&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keyword">char</span> *<span class="title">what</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> message.data();</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">string</span> message;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> myexception(<span class="string">"p is NULL"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span>(myexception e) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, e.what());</span><br><span class="line">    <span class="keyword">throw</span>;    <span class="comment">//重新抛出异常，异常类型为myexception</span></span><br><span class="line">  &#125;<span class="keyword">catch</span> (<span class="built_in">std</span>::exception e) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s"</span>, e.what());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      Func();</span><br><span class="line">    &#125; <span class="keyword">catch</span>(myexception e)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, e.what());</span><br><span class="line">    &#125; <span class="keyword">catch</span>(...)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>p is NULL<br>
p is NULL</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Myexception</span> :</span> <span class="keyword">public</span> <span class="built_in">std</span>::exception &#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line">  Myexception(<span class="built_in">std</span>::<span class="built_in">string</span> s)&#123;</span><br><span class="line">      message = <span class="keyword">new</span> <span class="keyword">char</span>[s.length() + <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; s.length();i++)  message[i] = s[i];</span><br><span class="line">  &#125;</span><br><span class="line">  Myexception()&#123;  message = <span class="literal">NULL</span>; &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keyword">char</span> *<span class="title">what</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (message == <span class="literal">NULL</span>)  <span class="keyword">throw</span> <span class="string">"unknown exception!"</span>;</span><br><span class="line">      <span class="keyword">return</span> message;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">virtual</span> ~Myexception()&#123;</span><br><span class="line">      <span class="keyword">delete</span> message;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="comment">//std::string message;</span></span><br><span class="line">  <span class="keyword">char</span> *message;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">char</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">if</span> (p == <span class="literal">NULL</span>)  <span class="keyword">throw</span> Myexception();  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      foo();</span><br><span class="line">    &#125; <span class="keyword">catch</span>(Myexception e)&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, e.what());</span><br><span class="line">      &#125;<span class="keyword">catch</span>(<span class="keyword">const</span> <span class="keyword">char</span>* s)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, s);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(...)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>unknown exception!</p>
</blockquote>
<div class="note info">
<p>我验证了 virtual const char *what () 里面也可以抛异常</p>
</div>
<h2 id="引用"><a class="markdownIt-Anchor" href="#引用">#</a> 引用</h2>
<figure class="highlight c++"><figcaption><span>demo</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> val[<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> &amp;<span class="title">put</span><span class="params">(<span class="keyword">int</span> idx)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> val[idx];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> &amp;a, <span class="keyword">int</span> &amp;b)</span></span>&#123;</span><br><span class="line">    a ^= b ^= a ^= b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> res;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fn1</span><span class="params">(<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">    res = r * r;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span>&amp; <span class="title">fn2</span><span class="params">(<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">    res = r * r;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">put</span>(<span class="number">0</span>) = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">put</span>(<span class="number">1</span>) = <span class="number">2</span>;</span><br><span class="line">    For(i, <span class="number">0</span>, <span class="number">2</span>)    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, val[i]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> &amp;ra = a, &amp;rb = b;</span><br><span class="line">    swap(ra, rb);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, a, b);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> r = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span> x = fn1(r), y = fn2(r);</span><br><span class="line">    <span class="keyword">int</span> &amp;ry = fn2(r);<span class="comment">//  &amp;rx = fn1(r);不能这么写</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="string">" "</span> &lt;&lt; y &lt;&lt; <span class="string">" "</span> &lt;&lt; <span class="comment">/*rx &lt;&lt;*/</span> <span class="string">" "</span> &lt;&lt; ry &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1<br>
2<br>
2 1<br>
9 9  9</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">struct_A</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">10</span>];</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    int operator[] (int idx)&#123;</span></span><br><span class="line"><span class="comment">        return a[idx];                  //如果返回值是int不是int&amp;的话，a[3]=10;将非法</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    int* operator[] (int idx)&#123;</span></span><br><span class="line"><span class="comment">        return a + idx;                 //如果返回值是int*的话，赋值语句就要改成*a[3]=10;非常麻烦</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    <span class="keyword">int</span>&amp; <span class="keyword">operator</span>[](<span class="keyword">int</span> idx)&#123;</span><br><span class="line">        <span class="keyword">return</span> a[idx];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;&#125;             <span class="comment">//这样写传入参数时会拷贝一份a，效率低下</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func2</span><span class="params">(<span class="keyword">int</span> *a)</span></span>&#123;&#125;            <span class="comment">//这样写传入参数指针有可能被修改，比较危险</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func3</span><span class="params">(<span class="keyword">int</span>&amp; a)</span></span>&#123;&#125;            <span class="comment">//这样写没有拷贝，但传入的变量可以被修改</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func4</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span>&amp; a)</span></span>&#123;&#125;      <span class="comment">//这样写既没有拷贝，也不可被修改</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    struct_A a;</span><br><span class="line">    a[<span class="number">3</span>] = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a.<span class="keyword">operator</span>[](<span class="number">3</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span>&amp; rb = b;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %x %x\n"</span>, rb, &amp;b, &amp;rb);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>10<br>
10 61fdec 61fdec</p>
</blockquote>
<h2 id="友元"><a class="markdownIt-Anchor" href="#友元">#</a> 友元</h2>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span>;</span>                             <span class="comment">//友元类</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> A &amp;a)</span></span>;              <span class="comment">//友元函数                  友元就是向外部的类和函数公开private</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>;						  <span class="comment">//草，我写着玩的</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">int</span> value = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> A &amp;a)</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d from A!\n"</span>, a.value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>&#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        A a;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span></span>&#123;</span><br><span class="line">            a.value = <span class="number">-100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a.value);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    B b;</span><br><span class="line">    b.<span class="built_in">print</span>();</span><br><span class="line">    b.<span class="built_in">set</span>();</span><br><span class="line">    b.<span class="built_in">print</span>();</span><br><span class="line">    </span><br><span class="line">    A a;</span><br><span class="line">    <span class="built_in">print</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>0<br>
-100<br>
0 from A!</p>
</blockquote>
<h2 id="重载运算符"><a class="markdownIt-Anchor" href="#重载运算符">#</a> 重载运算符</h2>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Time</span>&#123;</span></span><br><span class="line">    <span class="keyword">friend</span> Time <span class="keyword">operator</span> += (Time&amp; A, <span class="keyword">const</span> Time&amp; B);</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp;os, <span class="keyword">const</span> Time&amp; A);</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">int</span> minute, hour;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        Time <span class="keyword">operator</span> + (<span class="keyword">const</span> Time&amp; B)&#123;        <span class="comment">//直接写在类里面</span></span><br><span class="line">            Time res;</span><br><span class="line">            res.hour = <span class="keyword">this</span> -&gt; hour + B.hour + (<span class="keyword">this</span> -&gt; minute + B.minute) / <span class="number">60</span>;</span><br><span class="line">            res.minute = (<span class="keyword">this</span> -&gt; minute + B.minute) % <span class="number">60</span>;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;   </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">friend</span> ostream &amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp;os, <span class="keyword">const</span> Time&amp; A)&#123; <span class="comment">//重载 &lt;&lt; 写成友元在外部直接调用</span></span><br><span class="line">            os &lt;&lt; <span class="string">"("</span> &lt;&lt; A.hour &lt;&lt; <span class="string">":"</span> &lt;&lt; A.minute &lt;&lt; <span class="string">")"</span>;          </span><br><span class="line">            <span class="keyword">return</span> os;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Time operator &lt;&lt; (const ostream &amp;os)&#123;</span></span><br><span class="line"><span class="comment">            os &lt;&lt; "(" &lt;&lt; hour &lt;&lt; ":" &lt;&lt; minute &lt;&lt; ")";</span></span><br><span class="line"><span class="comment">            return *this;</span></span><br><span class="line"><span class="comment">        &#125;               //这样写的话主程序调用就成了a &lt;&lt; cout &lt;&lt; cout &lt;&lt; cout;无法同时输出a，b</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        ostream &amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp;os)&#123;</span><br><span class="line">            os &lt;&lt; <span class="string">"("</span> &lt;&lt; hour &lt;&lt; <span class="string">":"</span> &lt;&lt; minute &lt;&lt; <span class="string">")"</span>;        </span><br><span class="line">            <span class="keyword">return</span> os;</span><br><span class="line">        &#125;              <span class="comment">//这样写的话就成了a &lt;&lt; cout &lt;&lt; b; 需要配合上未注释掉的friend版本</span></span><br><span class="line">                       <span class="comment">//总之，返回类型要是ostream，而且&lt;&lt;右侧元素是A最好的写法就是友元</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> hour, <span class="keyword">int</span> minute)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span> -&gt; hour = hour;</span><br><span class="line">            <span class="keyword">this</span> -&gt; minute = minute;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d:%d\n"</span>, hour, minute);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Time <span class="keyword">operator</span> += (Time&amp; A, <span class="keyword">const</span> Time&amp; B)&#123;      <span class="comment">//利用友元写在类外面</span></span><br><span class="line">    A = A + B;</span><br><span class="line">    <span class="keyword">return</span> A;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Time a, b;</span><br><span class="line">    a.<span class="built_in">set</span>(<span class="number">1</span>, <span class="number">30</span>);</span><br><span class="line">    b.<span class="built_in">set</span>(<span class="number">3</span>, <span class="number">40</span>);</span><br><span class="line">    a = a + b;</span><br><span class="line">    a.<span class="built_in">print</span>();</span><br><span class="line">    a += b;</span><br><span class="line">    a.<span class="built_in">print</span>();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    a &lt;&lt; <span class="built_in">cout</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>5:10<br>
8:50<br>
(8:50)(3:40)<br>
(8:50)(3:40)</p>
</blockquote>
<div class="note info">
<p>我发现在重载运算符时，写不写 friend 的一个直接影响是 operator 函数参数的个数。如果写了 friend 就能填两个，否则只能填一个</p>
</div>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="keyword">int</span> a[<span class="number">10</span>];</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)  a[i] = -i;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">int</span> &amp; <span class="keyword">operator</span> [] (<span class="keyword">int</span> idx)&#123;</span><br><span class="line">            <span class="keyword">return</span> a[idx];</span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">set</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        A &amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp;os)&#123;</span><br><span class="line">            os &lt;&lt; a[<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">        &#125;                           <span class="comment">//这就是demo1里面被注释掉的版本</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    a[<span class="number">2</span>] = <span class="number">114514</span>;</span><br><span class="line">    a();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, a[<span class="number">2</span>], a[<span class="number">3</span>]);</span><br><span class="line">    (a &lt;&lt; <span class="built_in">cout</span>) &lt;&lt; <span class="built_in">cout</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-2 -3<br>
-3-3</p>
</blockquote>
<h2 id="new和delete"><a class="markdownIt-Anchor" href="#new和delete">#</a> new 和 delete</h2>
<figure class="highlight c++"><figcaption><span>demo1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">T</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        T()&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"T()"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            w = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ~T()&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"~T()"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> w;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    T t = T();</span><br><span class="line">    t.w = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    T* p = <span class="keyword">new</span>(&amp;t) T;      <span class="comment">//new(地址) T,在指定地址往后sizeof(T)长度的内存上新建个T</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; t.w &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> a[<span class="keyword">sizeof</span>(T)];</span><br><span class="line">    p = <span class="keyword">new</span>(a) T;        <span class="comment">//new(地址) T,在指定地址往后sizeof(T)长度的内存上新建个T</span></span><br><span class="line">                         <span class="comment">//要注意，编译阶段就会对new()里面的地址是否留足了sizeof(T)进行检查。</span></span><br><span class="line">                         <span class="comment">//若写成 char a[sizeof(T) - 1]编译阶段便会warning</span></span><br><span class="line"></span><br><span class="line">    p = <span class="keyword">new</span>(a) T;       <span class="comment">//operator new</span></span><br><span class="line">    p = <span class="keyword">new</span> T();        <span class="comment">//new operator</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>T()<br>
T()<br>
0<br>
T()<br>
T()<br>
T()<br>
~T()</p>
</blockquote>
<h2 id="const-关键字"><a class="markdownIt-Anchor" href="#const-关键字">#</a> const 关键字</h2>
<figure class="highlight c++"><figcaption><span>指针</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s[] = <span class="string">"abc"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> *<span class="keyword">const</span> p1 = s; </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; *p1 &lt;&lt; <span class="built_in">endl</span>;            <span class="comment">//只能输出a，因为p1是个const，无法p1++输出后一位</span></span><br><span class="line">    <span class="keyword">char</span> <span class="keyword">const</span> *p2 = s;</span><br><span class="line">    <span class="comment">//*p2 = "d";                    //无法修改p2指向的值，因为p2指向的是个char const不可修改是只读   </span></span><br><span class="line">                                    <span class="comment">//报错：error: assignment of read-only location '* p2'</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *p3 = s;             <span class="comment">//等价于p2，从右往左读指向了个const char类型无法修改      </span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>a</p>
</blockquote>
<figure class="highlight c++"><figcaption><span>demo2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">(<span class="keyword">int</span> *<span class="keyword">const</span> a)</span></span>&#123;</span><br><span class="line">    <span class="comment">//a++;              同demo1，这样写是错的</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func2</span><span class="params">(<span class="keyword">int</span> <span class="keyword">const</span> *a)</span></span>&#123;  </span><br><span class="line">    <span class="comment">//*a = 4;            无法修改，报错： error: assignment of read-only location '* a'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *a = <span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">3</span>);</span><br><span class="line">    func1(a);</span><br><span class="line">    func2(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><figcaption><span>demo3</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> d = <span class="number">0</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    A()&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//a = 10;</span></span><br><span class="line">        b = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">const</span> <span class="keyword">void</span> <span class="title">func2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//a = 10;   a是const 不可改</span></span><br><span class="line">        b = <span class="number">10</span>;      <span class="comment">//但const成员函数可以改成员变量！和网上大多说的不同</span></span><br><span class="line">                     <span class="comment">//感觉和普通成员函数没区别了</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">func3</span><span class="params">()</span> <span class="keyword">const</span></span>&#123;             <span class="comment">//const写在这个位置只出现于成员函数，使得函数内部不得修改成员变量</span></span><br><span class="line">        <span class="comment">//b = 10;               错误，常函数不得修改成员变量</span></span><br><span class="line">        d = <span class="number">10</span>;             <span class="comment">//但全局变量可以</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> A a;</span><br><span class="line">    A b;</span><br><span class="line">    <span class="comment">//a.b = 3;  错误，a是const的全部成员变量都不可动</span></span><br><span class="line">    <span class="comment">//a.func1(); a.func2(); 错误，a是const的a无法访问其成员函数</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a.a &lt;&lt; <span class="string">" "</span> &lt;&lt; a.b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    b.func2();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; b.a &lt;&lt; <span class="string">" "</span> &lt;&lt; b.b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1 2<br>
1 10</p>
</blockquote>

  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2023-03-09 10:05:00" itemprop="dateModified" datetime="2023-03-09T10:05:00+08:00">2023-03-09</time>
  </span>
  <span id="2021/06/09/C C++ 语法/" class="item leancloud_visitors" data-flag-title="C-C++ 语法" title="Views">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">Views</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">times</span>
  </span>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>Post author:  </strong>SuBonan <i class="ic i-at"><em>@</em></i>やがて、平凡な人になる
  </li>
  <li class="link">
    <strong>Post link: </strong>
    <a href="http://sugarsbn.github.io/2021/06/09/C%20C++%20%E8%AF%AD%E6%B3%95/" title="C-C++ 语法">http://sugarsbn.github.io/2021/06/09/C C++ 语法/</a>
  </li>
  <li class="license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2021/06/03/test/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;01&#x2F;12&#x2F;Q5dWs.jpg" title="test">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>test</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2021/06/16/%E5%85%B3%E4%BA%8E%E5%8F%B2%E7%93%A6%E8%A5%BF%E5%BA%A6%E8%A7%84%E5%92%8C%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%96%B9%E7%A8%8B%E7%9A%84%E6%8E%A8%E5%AF%BC/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;i.imgtg.com&#x2F;2023&#x2F;01&#x2F;12&#x2F;Q5RyI.jpg" title="关于史瓦西度规和拉格朗日方程的推导">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>关于史瓦西度规和拉格朗日方程的推导</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#c部分"><span class="toc-number">1.</span> <span class="toc-text"> C 部分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#动态空间"><span class="toc-number">1.1.</span> <span class="toc-text"> 动态空间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#malloc分配空间"><span class="toc-number">1.1.1.</span> <span class="toc-text"> malloc 分配空间</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高维数组"><span class="toc-number">1.2.</span> <span class="toc-text"> 高维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#高维数组奇妙写法"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 高维数组奇妙写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#高维数组初始化"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 高维数组初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#高维数组的传值"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 高维数组的传值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#特别注意高维数组传值写法"><span class="toc-number">1.2.4.</span> <span class="toc-text"> 特别注意高维数组传值写法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#共用体"><span class="toc-number">1.3.</span> <span class="toc-text"> 共用体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数指针"><span class="toc-number">1.4.</span> <span class="toc-text"> 函数指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函数指针-2"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 函数指针</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#宏"><span class="toc-number">1.5.</span> <span class="toc-text"> 宏</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#宏的特殊用法"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 宏的特殊用法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#柔性数组"><span class="toc-number">1.6.</span> <span class="toc-text"> 柔性数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串相关"><span class="toc-number">1.7.</span> <span class="toc-text"> 字符串相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化"><span class="toc-number">1.7.1.</span> <span class="toc-text"> 初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#strcpy函数"><span class="toc-number">1.7.2.</span> <span class="toc-text"> strcpy 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#strcmp函数"><span class="toc-number">1.7.3.</span> <span class="toc-text"> strcmp 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#存储区域"><span class="toc-number">1.7.4.</span> <span class="toc-text"> 存储区域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指针初步"><span class="toc-number">1.8.</span> <span class="toc-text"> 指针初步</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#c部分-2"><span class="toc-number">2.</span> <span class="toc-text"> C++ 部分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#运算优先级"><span class="toc-number">2.1.</span> <span class="toc-text"> 运算优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#伪局部函数"><span class="toc-number">2.2.</span> <span class="toc-text"> （伪）局部函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#纯虚函数和抽象类"><span class="toc-number">2.3.</span> <span class="toc-text"> 纯虚函数和抽象类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#仿函数"><span class="toc-number">2.4.</span> <span class="toc-text"> 仿函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分配内存"><span class="toc-number">2.5.</span> <span class="toc-text"> 分配内存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bad版"><span class="toc-number">2.5.1.</span> <span class="toc-text"> bad 版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#good版"><span class="toc-number">2.5.2.</span> <span class="toc-text"> good 版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构造函数和析构函数"><span class="toc-number">2.6.</span> <span class="toc-text"> 构造函数和析构函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#对象和指针的析构顺序"><span class="toc-number">2.6.1.</span> <span class="toc-text"> 对象和指针的析构顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#继承的构造与析构"><span class="toc-number">2.6.2.</span> <span class="toc-text"> 继承的构造与析构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多继承"><span class="toc-number">2.6.3.</span> <span class="toc-text"> 多继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#局部类"><span class="toc-number">2.7.</span> <span class="toc-text"> 局部类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类继承"><span class="toc-number">2.8.</span> <span class="toc-text"> 类继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#枚举类"><span class="toc-number">2.9.</span> <span class="toc-text"> 枚举类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#命名空间"><span class="toc-number">2.10.</span> <span class="toc-text"> 命名空间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模板"><span class="toc-number">2.11.</span> <span class="toc-text"> 模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#嵌套类"><span class="toc-number">2.12.</span> <span class="toc-text"> 嵌套类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#虚函数"><span class="toc-number">2.13.</span> <span class="toc-text"> 虚函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#异常"><span class="toc-number">2.14.</span> <span class="toc-text"> 异常</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#引用"><span class="toc-number">2.15.</span> <span class="toc-text"> 引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#友元"><span class="toc-number">2.16.</span> <span class="toc-text"> 友元</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重载运算符"><span class="toc-number">2.17.</span> <span class="toc-text"> 重载运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#new和delete"><span class="toc-number">2.18.</span> <span class="toc-text"> new 和 delete</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#const-关键字"><span class="toc-number">2.19.</span> <span class="toc-text"> const 关键字</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
        <ul>
          <li class="active"><a href="/2021/06/09/C%20C++%20%E8%AF%AD%E6%B3%95/" rel="bookmark" title="C-C++ 语法">C-C++ 语法</a></li><li><a href="/2022/04/21/linker-symtable/" rel="bookmark" title="链接（基于 x86-64 下标准 ELF 格式）">链接（基于 x86-64 下标准 ELF 格式）</a></li><li><a href="/2023/01/05/C-%E6%95%B0%E7%BB%84/" rel="bookmark" title="C++ 中数组和内存分布">C++ 中数组和内存分布</a></li><li><a href="/2023/01/11/Machine-Learning/" rel="bookmark" title="Machine Learning 机器学习">Machine Learning 机器学习</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="SuBonan"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">SuBonan</p>
  <div class="description" itemprop="description">やがて、平凡な人になる <br><a href="http://www.subonan.com/computer-graphics" target="_blank" rel="noopener"> 图形学作业请点这里 </a></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">113</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">20</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">13</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1N1Z2FyU0JO" title="https:&#x2F;&#x2F;github.com&#x2F;SugarSBN"><i class="ic i-github"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

  </ul>

</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2021/06/03/test/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2021/06/16/%E5%85%B3%E4%BA%8E%E5%8F%B2%E7%93%A6%E8%A5%BF%E5%BA%A6%E8%A7%84%E5%92%8C%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E6%96%B9%E7%A8%8B%E7%9A%84%E6%8E%A8%E5%AF%BC/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>Random Posts</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" title="In - 计算机">- 计算机</a>
</div>

    <span><a href="/2022/04/21/linker-symtable/" title="链接（基于 x86-64 下标准 ELF 格式）">链接（基于 x86-64 下标准 ELF 格式）</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" title="In 计算机基础">计算机基础</a>
</div>

    <span><a href="/2023/06/14/Database/" title="Introduction to Database">Introduction to Database</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2020/10/28/%E6%9D%82%E6%83%B3/" title="杂想">杂想</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2022/08/28/%E5%85%B3%E4%BA%8EHaskell%E5%AF%B9Kmeans%E7%AE%97%E6%B3%95parallel%E5%B9%B6%E8%A1%8C%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%B3%A8%E9%87%8A/" title="关于 Haskell 对 Kmeans 算法 parallel 并行实现的注释">关于 Haskell 对 Kmeans 算法 parallel 并行实现的注释</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/" title="In - 数学基础">- 数学基础</a>
</div>

    <span><a href="/2023/11/08/ABFEx/" title="Analysis of Boolean Function （Course Exercise Solutions)">Analysis of Boolean Function （Course Exercise Solutions)</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80/" title="In - 数学基础">- 数学基础</a>
</div>

    <span><a href="/2023/05/08/Galois-Theory/" title="Galois Theory">Galois Theory</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
</div>

    <span><a href="/2021/06/26/%E5%8F%A4%E6%80%AA%E7%9A%84%E4%BA%BA/" title="古怪的人">古怪的人</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E8%AE%A1%E7%AE%97%E5%A4%8D%E6%9D%82%E6%80%A7/" title="In 计算复杂性">计算复杂性</a>
</div>

    <span><a href="/2023/04/30/Savitch-theorem/" title="Savitch&#39;s Theorem">Savitch's Theorem</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E7%A8%8B%E5%BA%8F%E9%80%BB%E8%BE%91/" title="In - 程序逻辑">- 程序逻辑</a>
</div>

    <span><a href="/2023/07/27/logics/" title="Logic categories">Logic categories</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E9%87%8F%E5%AD%90%E8%AE%A1%E7%AE%97/" title="In - 量子计算">- 量子计算</a>
</div>

    <span><a href="/2023/10/23/quantum-key-distribution/" title="Quantum Key Distribution">Quantum Key Distribution</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>Recent Comments</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">SuBonan @ SuBonan</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2021/06/09/C C++ 语法/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,copyright: 'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
